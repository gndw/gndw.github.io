(this["webpackJsonpsocial-story-web-display"]=this["webpackJsonpsocial-story-web-display"]||[]).push([[0],{100:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},127:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),o=n(48),c=n.n(o),s=(n(99),n(12)),u=(n(100),n(2)),d={version:void 0},l=n(3),f=n.n(l),p=n(4),m=n(7),b={init:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=r.getStoreState,o=r.getStoreActions,c=a.storyService,e.next=4,c.init({getStoreState:i,getStoreActions:o});case 4:m.Settings.defaultLocale="id",String.prototype.formatUnicorn=String.prototype.formatUnicorn||function(){var e=this.toString();if(arguments.length){var t,n=typeof arguments[0],r="string"===n||"number"===n?Array.prototype.slice.call(arguments):arguments[0];for(t in r)e=e.replace(new RegExp("\\{"+t+"\\}","gi"),r[t])}return e},t.setInitialized();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),setInitialized:Object(u.b)((function(e){e.isInitialized=!0})),isInitialized:!1},j={fetchAvailableStories:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=a.dataService,e.next=4,i.fetchAvailableStories();case 4:e.sent.forEach((function(e){return t.addAvailableStory(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),availableStories:[],addAvailableStory:Object(u.b)((function(e,t){e.availableStories.push(t)})),startStory:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l,p,m,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.injections,i=r.getState,o=a.storyService,c=a.dataService,s=a.logService,u=i().availableStories,d=u.find((function(e){return e.id===n}))){e.next=12;break}return e.next=7,c.fetchAvailableStories();case 7:if(l=e.sent,d=l.find((function(e){return e.id===n}))){e.next=12;break}return s.error("Story with id: ".concat(n," is not found!")),e.abrupt("return");case 12:return e.next=14,c.fetchAndValidateStory(d.src);case 14:return p=e.sent,m=p.data,(b=p.error)&&s.error(b),t.setActiveStory({storyId:m,storyStepIndex:0}),e.next=21,t.validateStoryTag();case 21:o.play();case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),continueStory:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=r.getState,o=a.storyService,c=a.dataService,s=a.logService,e.next=4,c.getStoryStepIndexWithTag(i().activeStoryId,n.next);case 4:u=e.sent,d=u.data,(l=u.error)&&s.error(l),t.setActiveStory({storyId:i().activeStoryId,storyStepIndex:d}),o.continue();case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),isPlaying:!1,isFinished:!1,activeStoryId:"",activeStoryStepIndex:0,setActiveStory:Object(u.b)((function(e,t){e.isPlaying=!0,e.activeStoryId=t.storyId,e.activeStoryStepIndex=t.storyStepIndex})),stopActiveStory:Object(u.b)((function(e,t){e.isFinished=!0,e.activeStoryId=void 0,e.activeStoryStepIndex=void 0})),targetActiveStoryStepIndex:0,setTargetActiveStoryStepIndex:Object(u.b)((function(e,t){e.targetActiveStoryStepIndex=t})),targetActiveStoryStepTag:void 0,setTargetActiveStoryStepTag:Object(u.b)((function(e,t){e.targetActiveStoryStepTag=t})),isImmediate:Object(u.d)((function(e){return e.activeStoryStepIndex<e.targetActiveStoryStepIndex})),pauseAtStoryStepIndex:-1,setPauseAtStoryStepIndex:Object(u.b)((function(e,t){e.pauseAtStoryStepIndex=t})),pauseAtStoryStepTag:void 0,setPauseAtStoryStepTag:Object(u.b)((function(e,t){e.pauseAtStoryStepTag=t})),isPauseHere:Object(u.d)((function(e){return e.activeStoryStepIndex===e.pauseAtStoryStepIndex})),validateStoryTag:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.injections,void 0===(i=r.getState)().targetActiveStoryStepTag){e.next=7;break}return o=a.dataService,c=a.logService,e.next=5,o.getStoryStepIndexWithTag(i().activeStoryId,i().targetActiveStoryStepTag);case 5:(s=e.sent).error?c.error(s.error):t.setTargetActiveStoryStepIndex(s.data);case 7:if(void 0===i().pauseAtStoryStepTag){e.next=13;break}return u=a.dataService,d=a.logService,e.next=11,u.getStoryStepIndexWithTag(i().activeStoryId,i().pauseAtStoryStepTag);case 11:(l=e.sent).error?d.error(l.error):t.setPauseAtStoryStepIndex(l.data);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},h=n(6),O={data:[],dataById:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),setData:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n<0?e.data.push(t):e.data[n]=Object(h.a)(Object(h.a)({},e.data[n]),t)})),removeData:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n>=0&&e.data.splice(n,1)})),isHideChatbox:!1,setHideChatbox:Object(u.b)((function(e,t){e.isHideChatbox=t}))},x={setStatedTime:Object(u.b)((function(e,t){e.resetTime=m.DateTime.local().toISO(),e.statedTime=m.DateTime.fromISO(t).toISO()})),addStatedTime:Object(u.b)((function(e,t){var n=m.Duration.fromObject({milliseconds:t});e.statedTime=m.DateTime.fromISO(e.statedTime).plus(n).toISO()})),startSimulationStartTime:Object(u.b)((function(e,t){e.simulationStartTime=m.DateTime.local().toISO(),e.simulationOffsetDuration=0})),addSimulationOffsetTime:Object(u.b)((function(e,t){e.simulationOffsetDuration=e.simulationOffsetDuration+t})),wait:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,r.getStoreState)().storybook.isImmediate){e.next=6;break}return e.next=4,new Promise((function(e){return setTimeout(e,n)}));case 4:e.next=8;break;case 6:t.addStatedTime(n),t.addSimulationOffsetTime(n);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),resetTime:"2020-05-25T10:24:15",statedTime:"2020-05-25T09:24:15",simulationStartTime:m.DateTime.local().toISO(),simulationOffsetDuration:0},v=function(e,t){var n=m.DateTime.local().diff(m.DateTime.fromISO(t));return m.DateTime.fromISO(e).plus(n)},y=function(e,t){var n=m.DateTime.local().diff(m.DateTime.fromISO(t));return m.DateTime.fromISO(e).plus(n).toISO()},g=function(e,t){return m.DateTime.local().diff(m.DateTime.fromISO(e)).plus(m.Duration.fromObject({milliseconds:t})).toObject().milliseconds},S={data:[],dataById:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),setPeopleData:Object(u.b)((function(e,t){if(t.id){var n=e.data.findIndex((function(e){return e.id===t.id}));n<0?e.data.push({id:t.id,name:void 0!==t.name?t.name:"Unnamed Contact",profilePicture:void 0!==t.profilePicture?t.profilePicture:"",isOnline:void 0!==t.isOnline&&t.isOnline,isTyping:void 0!==t.isTyping&&t.isTyping,isFocus:void 0===t.isFocus||t.isFocus,lastOnline:void 0!==t.lastOnline?t.lastOnline:y(e.statedTimeFromTime,e.resetTimeFromTime)}):e.data[n]=Object(h.a)(Object(h.a)({},e.data[n]),t)}})),setPeopleOnline:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isOnline=!0)})),setPeopleOffline:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n>=0&&(e.data[n].isOnline=!1,e.data[n].lastOnline=y(e.statedTimeFromTime,e.resetTimeFromTime))})),setPeopleFocus:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isFocus=!0)})),setPeopleUnfocus:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isFocus=!1)})),setPeopleTyping:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isTyping=!0)})),setPeopleNotTyping:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isTyping=!1)})),resetTimeFromTime:Object(u.d)([function(e,t){return t.time.resetTime}],(function(e){return e})),statedTimeFromTime:Object(u.d)([function(e,t){return t.time.statedTime}],(function(e){return e}))},k=n(183),I=function(e){return{id:Object(k.a)(),type:"conversation",peopleId:e,chats:[]}},T={data:[],sendMessageFromPeopleToMe:Object(u.b)((function(e,t){if(t.id&&t.message){var n,r,a,i=(n=t.message,{id:Object(k.a)(),message:n,isMyChat:!1,status:[]}),o=(r=e.statedTimeFromTime,a=e.resetTimeFromTime,{type:"received",time:y(r,a)});i.status.push(o);var c=e.data.findIndex((function(e){return"conversation"===e.type&&e.peopleId===t.id}));if(c<0){var s=I(t.id);s.chats.push(i),e.data.push(s)}else e.data[c].chats.push(i)}})),sendMessageFromMeToPeople:Object(u.b)((function(e,t){if(t.id&&t.message){var n,r,a,i=(n=t.message,{id:Object(k.a)(),message:n,isMyChat:!0,status:[]}),o=(r=e.statedTimeFromTime,a=e.resetTimeFromTime,{type:"sent",time:y(r,a)});i.status.push(o);var c=e.data.findIndex((function(e){return"conversation"===e.type&&e.peopleId===t.id}));if(c<0){var s=I(t.id);s.chats.push(i),e.data.push(s)}else e.data[c].chats.push(i)}})),onPeopleCreated:Object(u.c)((function(e,t){return[t.people.setPeopleData]}),(function(e,t){if(!e.dataConversationByPeopleId(t.payload.id)){var n=I(t.payload.id);e.data.push(n)}})),dataConversationByPeopleId:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return"conversation"===e.type&&e.peopleId===t}))}})),dataByRoomId:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),dataUnreadMessageFromPeopleCount:Object(u.d)((function(e){var t=0;return e.data.forEach((function(e){e.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||(t+=1))}))})),t})),dataUnreadMessageFromPeople:Object(u.d)((function(e){return function(t){var n=[];return e.data.forEach((function(e){e.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||n.push(e))}))})),n}})),onCheckMyMessageToBeDelivered:Object(u.g)((function(e,t){return[e.sendMessageFromMeToPeople,t.player.setConnectivity]}),function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getStoreState,i=r.getStoreActions,!a().player.isConnected){e.next=6;break}return e.next=5,i().time.wait(500);case 5:a().chatroom.data.forEach((function(e){e.chats.forEach((function(n){n.isMyChat&&(void 0!==n.status.find((function(e){return"sent"===e.type}))&&void 0===n.status.find((function(e){return"delivered"===e.type}))&&t.setMessageAsDelivered({roomId:e.id,messageId:n.id}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),onCheckMyMessageToBeRead:Object(u.g)((function(e,t){return[e.setMessageAsDelivered,t.player.setConnectivity,t.people.setPeopleFocus,t.people.setPeopleOnline]}),function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getStoreState,i=r.getStoreActions,!a().player.isConnected){e.next=6;break}return e.next=5,i().time.wait(500);case 5:a().chatroom.data.forEach((function(e){e.chats.forEach((function(n){n.isMyChat&&(void 0!==n.status.find((function(e){return"delivered"===e.type}))&&a().people.dataById(e.peopleId).isOnline&&a().people.dataById(e.peopleId).isFocus&&t.setMessageAsRead({roomId:e.id,messageId:n.id}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),onCheckToReadAllMessagesFromPeople:Object(u.g)((function(e,t){return[t.player.openSimulationChatRoom,e.sendMessageFromPeopleToMe]}),function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,u,d,l,p,m,b,j,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getState,i=r.getStoreState,o=r.getStoreActions,c=function(e){var n=a().dataByRoomId(e);n.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||t.setMessageAsRead({roomId:n.id,messageId:e.id}))}))},u=Object(s.a)(n.resolvedTargets,2),d=u[0],l=u[1],e.t0=n.type,e.next=e.t0===d?6:e.t0===l?11:15;break;case 6:return e.next=8,o().time.wait(500);case 8:return"chatroom"===(p=i().player.getSelectedSimulationData).key&&(m=p.roomId,n.payload.roomId===m&&c(m)),e.abrupt("break",16);case 11:return b=a().dataConversationByPeopleId(n.payload.id),"chatroom"===(j=i().player.getSelectedSimulationData).key&&(h=j.roomId,b.id===h&&c(h)),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),setMessageAsDelivered:Object(u.b)((function(e,t){if(t.roomId&&t.messageId){var n,r,a=e.data.findIndex((function(e){return e.id===t.roomId}));if(a>=0){var i=e.data[a].chats.findIndex((function(e){return e.id===t.messageId}));if(i>=0){var o=(n=e.statedTimeFromTime,r=e.resetTimeFromTime,{type:"delivered",time:y(n,r)});e.data[a].chats[i].status.push(o)}}}})),setMessageAsRead:Object(u.b)((function(e,t){if(t.roomId&&t.messageId){var n,r,a=e.data.findIndex((function(e){return e.id===t.roomId}));if(a>=0){var i=e.data[a].chats.findIndex((function(e){return e.id===t.messageId}));if(i>=0){var o=(n=e.statedTimeFromTime,r=e.resetTimeFromTime,{type:"read",time:y(n,r)});e.data[a].chats[i].status.push(o)}}}})),resetTimeFromTime:Object(u.d)([function(e,t){return t.time.resetTime}],(function(e){return e})),statedTimeFromTime:Object(u.d)([function(e,t){return t.time.statedTime}],(function(e){return e}))},w={isTyping:!1,setIsTyping:Object(u.b)((function(e,t){e.isTyping=t})),isTypingEmoji:!1,setIsTypingEmoji:Object(u.b)((function(e,t){e.isTypingEmoji=t})),isInTypingMode:!1,setIsInTypingMode:Object(u.b)((function(e,t){e.isInTypingMode=t})),typeText:"",setTypeText:Object(u.b)((function(e,t){e.typeText=t})),setTypingProcess:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getStoreState,i=r.getStoreActions,t.setIsInTypingMode(!0),o=0;case 3:if(!(o<n.length)){e.next=14;break}if("string"!==typeof n[o]){e.next=8;break}return e.delegateYield(f.a.mark((function e(){var r,c,s,u,d,l,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){for(var t=[],n=0;n<e.length;n++)":"===e[n]&&t.push(n);var r=[];if(t.length>=2)for(var a=0;a<t.length-1;a++){var i=e.substring(t[a]+1,t[a+1]);i.length>0&&!i.includes(" ")&&r.push({from:t[a],to:t[a+1],text:i})}var o=[],c=-1;r.length>0&&(c=0);for(var s=0;s<e.length;s++)c>=0&&r[c].from===s?(o.push(e.substring(r[c].from,r[c].to+1)),s=r[c].to,c<r.length-1&&(c+=1)):o.push(e[s]);return o},c=function(e,t){return e.reduce((function(e,n,r){return r<=t?e+n:e}),"")},s=function(){var e=Object(p.a)(f.a.mark((function e(n,r,o){var s,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){var e=Object(p.a)(f.a.mark((function e(r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c(n,r),!!n[r]&&n[r].length>1){e.next=12;break}if(a().chattyping.isTyping){e.next=7;break}return e.next=6,i().time.wait(350);case 6:t.setIsTyping(!0);case 7:return t.setTypeText(o),e.next=10,i().time.wait(50);case 10:e.next=25;break;case 12:if(!a().chattyping.isTyping){e.next=18;break}return t.setIsTyping(!1),e.next=16,i().time.wait(350);case 16:e.next=20;break;case 18:return e.next=20,i().time.wait(250);case 20:return t.setTypeText(o),t.setIsTypingEmoji(!0),e.next=24,i().time.wait(50);case 24:t.setIsTypingEmoji(!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!(r<o)){e.next=11;break}u=r;case 3:if(!(u<=o)){e.next=9;break}return e.next=6,s(u);case 6:u++,e.next=3;break;case 9:e.next=19;break;case 11:if(!(r>o)){e.next=19;break}d=r;case 13:if(!(d>=o-1)){e.next=19;break}return e.next=16,s(d);case 16:d--,e.next=13;break;case 19:a().chattyping.isTyping&&t.setIsTyping(!1);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),u=r(a().chattyping.typeText),d=r(n[o]),l=0,m=0;case 7:if(!(m<u.length&&m<d.length)){e.next=16;break}if(u[m]!==d[m]){e.next=12;break}l+=1,e.next=13;break;case 12:return e.abrupt("break",16);case 13:m++,e.next=7;break;case 16:return e.next=18,i().time.wait(250);case 18:return e.next=20,s(u,u.length,l);case 20:return e.next=22,i().time.wait(750);case 22:return e.next=24,s(d,l,d.length);case 24:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:e.next=11;break;case 8:if("number"!==typeof n[o]){e.next=11;break}return e.next=11,i().time.wait(n[o]);case 11:o++,e.next=3;break;case 14:t.setTypeText(""),t.setIsInTypingMode(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},A={data:[],dataOptByChatroomIdAndOptId:Object(u.d)((function(e){return function(t,n){var r=e.data.find((function(e){return e.chatroomId===t}));if(r)return r.options.find((function(e){return e.id===n}))}})),dataOptsByChatroomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.options}})),dataSelectedOptByChatroomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.options.find((function(e){return e.selected}))}})),dataPeopleIdByRoomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.peopleId}})),addOptions:Object(u.f)((function(e,t,n){var r=n.getStoreState,a=(n.getStoreActions,n.injections);if(t.id&&t.options&&t.tag){var i=a.logService,o=r().chatroom.dataConversationByPeopleId(t.id);if(o){var c=o.id,s=r().storybook.activeStoryId;t.options.forEach((function(n){e.addOption({chatroomId:c,mesaage:n.message,next:n.next,storyId:s,tag:t.tag})}))}else i.error("Cannot added options: Conversation Room for ".concat(t.id," not found!"))}})),addOption:Object(u.b)((function(e,t){var n,r,a,i,o,c=(n=t.mesaage,r=t.next,a=t.storyId,i=t.tag,{id:Object(k.a)(),message:n,next:r,meta:{storyId:a,tag:i}}),s=e.data.findIndex((function(e){return e.roomId===t.roomId}));if(s<0){var u=(o=t.chatroomId,{id:Object(k.a)(),chatroomId:o,options:[]});u.options.push(c),e.data.push(u)}else e.data[s].options.push(c)})),selectOption:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.chatroomId===t.roomId}));n>=0&&(e.data[n].options=e.data[n].options.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{selected:e.id===t.optId})})))})),submitOption:Object(u.f)((function(e,t,n){var r=n.getStoreState,a=n.getStoreActions,i=(n.injections,r().chatoption.dataOptByChatroomIdAndOptId(t.roomId,t.optId));if(i){var o=r().chatroom.dataByRoomId(t.roomId).peopleId;a().chatroom.sendMessageFromMeToPeople({id:o,message:i.message}),a().storybook.continueStory({next:i.next})}})),removeAllOptionsByChatroomIdAndTag:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.chatroomId===t.roomId}));n>=0&&(e.data[n].options=e.data[n].options.filter((function(e){return e.meta.tag!==t.tag})))}))},P={isConnected:!0,setConnectivity:Object(u.b)((function(e,t){e.isConnected=t})),simulationData:[{key:"home",selected:!0}],addSimulationData:Object(u.b)((function(e,t){var n=e.simulationData.findIndex((function(e){return e.key===t.key}));n>=0?e.simulationData[n]=Object(h.a)(Object(h.a)({},e.simulationData[n]),t):e.simulationData.push(Object(h.a)({},t))})),selectSimulationData:Object(u.b)((function(e,t){e.simulationData=e.simulationData.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{selected:e.key===t.key})}))})),getSelectedSimulationData:Object(u.d)((function(e){return e.simulationData.find((function(e){return e.selected}))})),openSimulationChatRoom:Object(u.f)((function(e,t){e.addSimulationData({key:"chatroom",roomId:t.roomId}),e.selectSimulationData({key:"chatroom"})})),openSimulationHome:Object(u.f)((function(e,t){e.selectSimulationData({key:"home"})})),clicks:[],clicksById:Object(u.d)((function(e){return function(t){return e.clicks.includes(t)}})),addClick:Object(u.b)((function(e,t){return e.clicks.push(t)})),removeClick:Object(u.b)((function(e,t){return e.clicks=e.clicks.filter((function(e){return e!==t}))})),clickHomeIconChatRoom:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getStoreActions,i="home-icon-chat",t.addClick(i),e.next=5,a().time.wait(500);case 5:return t.removeClick(i),e.next=8,a().time.wait(1e3);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},M={data:[],displayChatNotification:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));if(n<0){var r={id:t.id,app:"chat",isDisplayed:!1,picture:t.picture,title:t.title,messages:[{message:t.message,time:t.time}]};e.data.push(r)}else e.data[n].isDisplayed=!1,e.data[n].picture=t.picture,e.data[n].title=t.title,e.data[n].messages.push({message:t.message,time:t.time})})),hideNotification:Object(u.b)((function(e,t){for(var n=0;n<e.data.length;n++)e.data[n].isDisplayed=!0})),showTriggerId:void 0,setShowTriggerId:Object(u.b)((function(e,t){e.showTriggerId=t})),onCheckToMakeMessageAsNotification:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromPeopleToMe]}),function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.getState,a=r.getStoreState,i=r.getStoreActions,o=a().chatroom.dataConversationByPeopleId(n.payload.id),c=a().player.getSelectedSimulationData,s="chatroom"!==c.key,u="chatroom"===c.key&&c.roomId!==o.id,!s&&!u){e.next=14;break}return d=a().people.dataById(n.payload.id),l={id:"people"+n.payload.id,picture:d.profilePicture,title:d.name,message:n.payload.message,time:y(a().chatroom.statedTimeFromTime,a().chatroom.resetTimeFromTime)},t.displayChatNotification(l),p=Object(k.a)(),t.setShowTriggerId(p),e.next=13,i().time.wait(3e3);case 13:a().notification.showTriggerId===p&&(t.setShowTriggerId(void 0),t.hideNotification());case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),isNoNotificationActive:Object(u.d)((function(e){return e.data.every((function(e){return e.isDisplayed}))}))},N={data:[],isMuted:!1,setMute:Object(u.b)((function(e,t){e.isMuted=t})),playAudio:Object(u.b)((function(e,t){var n={id:t.id?t.id:Object(k.a)(),loop:!0,src:t.src,volume:void 0!==t.volume?t.volume:1,muted:e.isMuted,startSimTime:g(e.simulationStartTime,e.simulationOffsetDuration)};e.data.push(n)})),playAudioOnetime:Object(u.b)((function(e,t){var n={id:t.id?t.id:Object(k.a)(),loop:!1,src:t.src,volume:void 0!==t.volume?t.volume:1,muted:e.isMuted,startSimTime:g(e.simulationStartTime,e.simulationOffsetDuration)};e.data.push(n)})),stopAudio:Object(u.b)((function(e,t){var n=e.data;t.src&&(n=n.filter((function(e){return e.src!==t.src}))),t.id&&(n=n.filter((function(e){return e.id!==t.id}))),e.data=n})),setAudio:Object(u.b)((function(e,t){if(t.id){var n=e.data.findIndex((function(e){return e.id===t.id}));e.data[n]=Object(h.a)(Object(h.a)({},e.data[n]),t)}})),fadeOutAudio:Object(u.f)(function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,i=r.getStoreActions,n.id&&n.time){e.next=3;break}return e.abrupt("return");case 3:if(!(o=a().data.find((function(e){return e.id===n.id})))){e.next=17;break}c=o.volume,s=n.time/100,u=s-1;case 8:if(!(u>=0)){e.next=16;break}return d=u/s*c,t.setAudio({id:n.id,volume:d}),e.next=13,i().time.wait(100);case 13:u--,e.next=8;break;case 16:t.stopAudio({id:n.id});case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),simulationStartTime:Object(u.d)([function(e,t){return t.time.simulationStartTime}],(function(e){return e})),simulationOffsetDuration:Object(u.d)([function(e,t){return t.time.simulationOffsetDuration}],(function(e){return e})),onTyping:Object(u.g)((function(e,t){return[t.chattyping.setIsTyping]}),(function(e,t){t.payload?e.playAudio({src:"/sounds/typing.mp3"}):e.stopAudio({src:"/sounds/typing.mp3"})})),onTypingEmoji:Object(u.g)((function(e,t){return[t.chattyping.setIsTypingEmoji]}),(function(e,t){t.payload&&e.playAudioOnetime({src:"/sounds/tap.ogg"})})),onClick:Object(u.g)((function(e,t){return[t.player.addClick]}),(function(e,t){e.playAudioOnetime({src:"/sounds/sfx-mouse-click.mp3"})})),onSendMessageFromMeToPeople:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromMeToPeople]}),(function(e,t){e.playAudioOnetime({src:"/sounds/juntos.ogg"})})),onSendMessageFromPeopleToMe:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromPeopleToMe]}),(function(e,t){e.playAudioOnetime({src:"/sounds/light.ogg"})})),onSimulationPagaChanged:Object(u.g)((function(e,t){return[t.player.openSimulationHome,t.player.openSimulationChatRoom]}),(function(e,t){e.playAudioOnetime({src:"/sounds/swipe.wav",volume:.3})})),onPeopleChangeOnlineStatus:Object(u.g)((function(e,t){return[t.people.setPeopleOnline,t.people.setPeopleOffline]}),(function(e,t,n){n.getStoreState;e.playAudioOnetime({src:"/sounds/sfx-bleep.mp3",volume:.3})}))},D=n(20),C=n(21),E={type:"GOTO",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.getStoreActions,e.abrupt("return",{data:n.next});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F={type:"WAIT",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,e.next=3,r().time.wait(n.time);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B={type:"SET_TIME",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.meta,n.src&&(n.src=n.src.formatUnicorn({baseurl:a.baseurl})),r().time.setStatedTime(n.time);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R={type:"SET_PEOPLE",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.getStoreState,i=t.meta,o=a().people.dataById(n.id),n.profilePicture&&(n.profilePicture=n.profilePicture.formatUnicorn({baseurl:i.baseurl})),r().people.setPeopleData(n),o&&void 0!==n.isOnline&&(!o.isOnline&&n.isOnline?r().people.setPeopleOnline(n):o.isOnline&&!n.isOnline&&r().people.setPeopleOffline(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_={type:"SET_MUSIC",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.meta,n.src&&(n.src=n.src.formatUnicorn({baseurl:a.baseurl})),n.onetime?r().audio.playAudioOnetime(n):r().audio.playAudio(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L={type:"STOP_MUSIC",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,n.time=n.time?n.time:0,e.next=4,r().audio.fadeOutAudio(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U={type:"SET_BACKGROUND",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreState,a=t.getStoreActions,i=t.meta,a().display.setData({id:"background",key:n.key?n.key:Object(k.a)(),src:n.src.formatUnicorn({baseurl:i.baseurl}),black:n.black,type:n.backgroundType,loop:!n.onetime,volume:1,mute:!1,startSimTime:g(r().time.simulationStartTime,r().time.simulationOffsetDuration)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H={type:"OPEN_CHATROOM",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i,o,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.getStoreState;case 1:if(a().notification.isNoNotificationActive){e.next=6;break}return e.next=4,r().time.wait(100);case 4:e.next=1;break;case 6:return e.next=8,r().time.wait(1e3);case 8:return e.next=10,r().player.clickHomeIconChatRoom();case 10:if((i=n.roomId)||(o=a().chatroom.dataConversationByPeopleId(n.peopleId),i=o.id),r().player.openSimulationChatRoom({roomId:i}),a().storybook.isImmediate||n.skipTimeForRead){e.next=23;break}if("people"!==n.by){e.next=23;break}c=a().chatroom.dataUnreadMessageFromPeople(n.id),s=0;case 17:if(!(s<c.length)){e.next=23;break}return e.next=20,r().time.wait(40*c[s].message.length);case 20:s++,e.next=17;break;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z={type:"OPEN_HOME",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.payload,(0,t.getStoreActions)().player.openSimulationHome();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W={type:"SEND_MESSAGE_FROM_ME_TO_PEOPLE",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,e.next=3,r().time.wait(1e3);case 3:if(a=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=5;break}return e.next=3,r().chattyping.setTypingProcess([].concat(Object(C.a)(t),[1e3]));case 3:e.next=7;break;case 5:return e.next=7,r().chattyping.setTypingProcess([t,1e3]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(f.a.mark((function e(t){var a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){for(a="",i=!1,o=t.length-1;o>=0&&!i;o--)"string"===typeof(c=t[o])&&(a=c,i=!0);i||(a=t[t.length-1]),r().chatroom.sendMessageFromMeToPeople({id:n.id,message:a})}else r().chatroom.sendMessageFromMeToPeople({id:n.id,message:t});return e.next=3,r().time.wait(500);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!n.messages){e.next=17;break}o=0;case 7:if(!(o<n.messages.length)){e.next=15;break}return e.next=10,a(n.messages[o]);case 10:return e.next=12,i(n.messages[o]);case 12:o++,e.next=7;break;case 15:e.next=22;break;case 17:if(!n.message){e.next=22;break}return e.next=20,a(n.message);case 20:return e.next=22,i(n.message);case 22:return e.next=24,r().time.wait(1e3);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G={type:"SEND_MESSAGE_FROM_PEOPLE_TO_ME",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,e.next=3,r().time.wait(1e3);case 3:if(!n.messages){e.next=19;break}a=0;case 5:if(!(a<n.messages.length)){e.next=17;break}return r().people.setPeopleTyping(n.id),e.next=9,r().time.wait(15*n.messages[a].length);case 9:if(r().people.setPeopleNotTyping(n.id),r().chatroom.sendMessageFromPeopleToMe(Object(h.a)(Object(h.a)({},n),{},{message:n.messages[a]})),n.skipTimeForRead){e.next=14;break}return e.next=14,r().time.wait(40*n.messages[a].length);case 14:a++,e.next=5;break;case 17:e.next=27;break;case 19:if(!n.message){e.next=27;break}return r().people.setPeopleTyping(n.id),e.next=23,r().time.wait(15*n.message.length);case 23:return r().people.setPeopleNotTyping(n.id),r().chatroom.sendMessageFromPeopleToMe(n),e.next=27,r().time.wait(40*n.message.length);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y={type:"ADD_MESSAGE_OPTIONS",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,r().chatoption.addOptions({id:n.id,tag:n.tag,options:n.options.map((function(e){return{message:e.message,next:e.next}}))}),e.abrupt("return",{data:"pause"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K={type:"DISPLAY_PAGE_TITLE",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,a=t.meta,n.background&&(n.background=n.background.formatUnicorn({baseurl:a.baseurl}),r().display.setData({id:"background",src:n.background,black:n.black,type:n.backgroundType})),r().display.setData({id:"play",page:"defaultTitle"}),e.next=5,r().time.wait(2e3);case 5:i=0;case 6:if(!(i<=n.title.length)){e.next=14;break}return o=n.title.substring(0,i),r().display.setData({id:"defaultTitle",title:o}),e.next=11,r().time.wait(75);case 11:i++,e.next=6;break;case 14:return e.next=16,r().time.wait(750);case 16:return r().display.setData({id:"defaultTitle",author:n.author}),e.next=19,r().time.wait(5e3);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J={type:"DISPLAY_PAGE_SIMULATION",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,a=t.meta,(i={}).id="defaultSimulation",n.peopleId&&(i.peopleId=n.peopleId),n.background&&(n.background=n.background.formatUnicorn({baseurl:a.baseurl}),r().display.setData({id:"background",src:n.background,black:n.black,type:n.backgroundType})),r().display.setData(i),r().display.setData({id:"play",page:"defaultSimulation"}),e.next=9,r().time.wait(1e3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V={type:"DISPLAY_PAGE_CREDIT",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,r().display.setData({id:"background",black:1}),r().display.setData({id:"play",page:"defaultCredit"}),a=[{title:"SFX Bleep",subtitle:"Bleep by Mike Koenig https://soundbible.com/1252-Bleep.html"}],i=[].concat(Object(C.a)(n.list),a),r().display.setData({id:"defaultCredit",list:i}),e.next=8,r().time.wait(2e3);case 8:o=f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r().display.setData({id:"defaultCredit",list:i.map((function(e,n){return Object(h.a)({focus:t===n},e)}))}),e.next=3,r().time.wait(350);case 3:case"end":return e.stop()}}),e)})),c=0;case 10:if(!(c<i.length)){e.next=15;break}return e.delegateYield(o(c),"t0",12);case 12:c++,e.next=10;break;case 15:return e.next=17,r().time.wait(2e3);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q={type:"DISPLAY_PAGE_OUTRO",execute:function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,n=t.getStoreActions,t.getStoreState,n().display.setData({id:"background",black:1}),n().display.setData({id:"play",page:"defaultOutro"}),e.next=5,n().time.wait(4e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=n(80).a+"",Q=new function e(){Object(D.a)(this,e),this.log=function(){},this.error=function(){}},Z=new function e(){var t=this;Object(D.a)(this,e),this.fetchAvailableStories=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("./data/story.json").then((function(e){return e.json()})).then((function(e){return t.push.apply(t,Object(C.a)(e))}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.fetchAndValidateStory=function(){var e=Object(p.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){t.stories.push(e),r={error:null,data:e.id}})).catch((function(e){r={error:e,data:null}}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStory=function(){var e=Object(p.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stories.find((function(e){return e.id===n}))){e.next=5;break}return e.abrupt("return",{error:"Story Step with id: ".concat(n," is not found")});case 5:return e.abrupt("return",{error:null,data:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStoryStepLength=function(){var e=Object(p.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",r);case 5:return a=r.data,e.abrupt("return",{error:null,data:a.storydata.length});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStoryStep=function(){var e=Object(p.a)(f.a.mark((function e(n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",a);case 5:if(i=a.data,!(r>=i.storydata.length)){e.next=8;break}return e.abrupt("return",{error:"Story Step with id: ".concat(n," is only have ").concat(i.storydata.length," steps, index ").concat(r," is not found")});case 8:return o=i.storydata[r],e.abrupt("return",{error:null,data:o});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getStoryStepIndexWithTag=function(){var e=Object(p.a)(f.a.mark((function e(n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",a);case 5:return i=a.data,o=i.storydata.findIndex((function(e){return e.tag===r})),e.abrupt("return",{error:o<0?"Story Step with tag:".concat(r," not found"):null,data:o});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getStoryMeta=function(){var e=Object(p.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",r);case 5:return a=r.data,e.abrupt("return",{error:null,data:a.meta});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stories=[]},$={master:b,info:d,storybook:j,display:O,time:x,people:S,chatroom:T,chattyping:w,chatoption:A,player:P,notification:M,audio:N},ee={initialState:{info:{version:X}},injections:{logService:Q,dataService:Z,storyService:new function e(t,n,r){var a=this;Object(D.a)(this,e),this.init=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getStoreState,r=t.getStoreActions,a.getStoreState=n,a.getStoreActions=r;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.play=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.getStoreActions().time.startSimulationStartTime(),e.next=3,a.execute();case 3:t=e.sent,(n=t.error)&&a.logService.error(n);case 6:case"end":return e.stop()}}),e)}))),this.continue=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.execute();case 2:t=e.sent,(n=t.error)&&a.logService.error(n);case 5:case"end":return e.stop()}}),e)}))),this.execute=Object(p.a)(f.a.mark((function e(){var t,n,r,i,o,c,s,u,d,l,m,b,j,h,O,x,v,y;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getStoreState().storybook.activeStoryId,n=a.getStoreState().storybook.activeStoryStepIndex,e.next=4,a.dataService.getStoryMeta(t);case 4:if(r=e.sent,i=r.data,!(o=r.error)){e.next=9;break}return e.abrupt("return",{error:o});case 9:return e.next=11,a.dataService.getStoryStep(t,n);case 11:if(c=e.sent,s=c.data,!(u=c.error)){e.next=16;break}return e.abrupt("return",{error:u});case 16:if(d=a.stepServices.find((function(e){return e.type===s.type}))){e.next=20;break}return l="Step Service with type ".concat(s.type," is Not Found!"),e.abrupt("return",{error:l});case 20:return e.next=22,d.execute({getStoreState:a.getStoreState,getStoreActions:a.getStoreActions,payload:s,meta:i,next:function(){var e=Object(p.a)(f.a.mark((function e(n){var r,i,o,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dataService.getStoryStepIndexWithTag(n);case 2:if(r=e.sent,i=r.data,(o=r.error)&&a.logService.error(o),a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:i}),!b()){e.next=13;break}return e.next=10,a.execute();case 10:c=e.sent,(s=c.error)&&a.logService.error(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 22:if(!(m=e.sent)||!m.error){e.next=25;break}return e.abrupt("return",{error:m.error});case 25:if(b=function(){return!a.getStoreState().storybook.isFinished&&!a.getStoreState().storybook.isPauseHere},void 0!==m){e.next=42;break}return e.next=29,a.dataService.getStoryStepLength(t);case 29:if(j=e.sent,h=j.data,!(O=j.error)){e.next=34;break}return e.abrupt("return",{error:O});case 34:if(n<h-1?a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:n+1}):a.getStoreActions().storybook.stopActiveStory(),!b()){e.next=39;break}return e.abrupt("return",a.execute());case 39:return e.abrupt("return",{error:null});case 40:e.next=63;break;case 42:if(!m||"pause"!==m.data){e.next=46;break}return e.abrupt("return",{});case 46:if(!m||!m.data){e.next=62;break}return e.next=49,a.dataService.getStoryStepIndexWithTag(t,m.data);case 49:if(x=e.sent,v=x.data,!(y=x.error)){e.next=54;break}return e.abrupt("return",{error:y});case 54:if(a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:v}),!b()){e.next=59;break}return e.abrupt("return",a.execute());case 59:return e.abrupt("return",{});case 60:e.next=63;break;case 62:return e.abrupt("return",{error:"No next data provided!"});case 63:case"end":return e.stop()}}),e)}))),this.dataService=t,this.stepServices=Object(C.a)(n),this.logService=r}(Z,[E,F,B,R,_,L,U,H,z,W,G,Y,K,J,V,q],Q)}},te=n(19),ne=(n(115),function(e){var t=e.vertical,n=e.children,a=e.mark;return Object(r.jsxs)("div",{className:"full-page-template"+(t?" full-page-template-vertical":""),children:[n,Object(r.jsx)("div",{className:"full-page-template-mark",children:a})]})}),re=ne;ne.defaultProps={vertical:!1};var ae=n(186),ie=(n(116),function(e){var t=e.value;return Object(r.jsx)(ae.b,{direction:"vertical",size:0,className:"core-footer",children:t})}),oe=n(188),ce=function(){var e=Object(u.j)((function(e){return e.info.version}));return Object(r.jsx)(ie,{value:[e,Object(r.jsxs)("span",{children:[Object(r.jsx)(oe.a,{})," @grimgank"]},"ssp")]})},se=(n(127),function(e){var t=e.children;return Object(r.jsx)("div",{className:"center-template",children:t})}),ue=n(182),de=function(e){var t=e.onStoryClicked,n=Object(u.j)((function(e){return e.storybook.availableStories})),i=Object(u.h)((function(e){return e.storybook.fetchAvailableStories})),o=Object(a.useState)(!1),c=Object(s.a)(o,2),d=c[0],l=c[1];return Object(a.useEffect)((function(){d||(i(),l(!0))}),[i,d,l]),Object(r.jsx)(se,{children:n.length>0?n.map((function(e){return Object(r.jsx)(ue.a,{onClick:function(){return t(e.id)},children:e.id},e.id)})):"Stories not available"})},le=n(9),fe=(n(134),n(185)),pe=function(e){var t=e.title,n=e.author,a=e.isImmediate,i=Object(fe.a)(),o=Object(s.a)(i,2),c=o[0],u=o[1],d=Object(fe.a)(),l=Object(s.a)(d,2),f=l[0],p=l[1],m=Object(le.c)({from:{opacity:0},to:{opacity:1,height:u.height},immediate:a}),b=Object(le.c)({from:{opacity:0},to:{opacity:1,height:p.height},immediate:a});return Object(r.jsxs)("div",{className:"default-title-space",children:[Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},m),{},{width:"100%"}),children:Object(r.jsx)("div",{ref:c,children:t?Object(r.jsx)("div",{className:"default-title-text default-title-text-title",children:t}):null})}),Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},b),{},{overflow:"hidden"}),children:Object(r.jsx)("div",{ref:f,children:n?Object(r.jsxs)("div",{className:"default-title-sub-container",children:[Object(r.jsx)("div",{className:"default-title-author",children:"diceritakan oleh"}),Object(r.jsx)("div",{className:"default-title-text default-title-text-sub",children:n})]}):null})})]})},me=function(){var e=Object(u.j)((function(e){return e.display.dataById("defaultTitle")})),t=Object(u.j)((function(e){return e.storybook.isImmediate}));return Object(r.jsx)(se,{children:Object(r.jsx)(pe,Object(h.a)({isImmediate:t},e))})},be=(n(135),function(e){var t=e.children;return Object(r.jsxs)("div",{className:"mobile-box-template",children:[Object(r.jsx)("div",{className:"mobile-box-template-top"}),Object(r.jsx)("div",{className:"mobile-box-template-center",children:t}),Object(r.jsx)("div",{className:"mobile-box-template-bottom"})]})}),je=(n(136),function(e){var t=e.top,n=e.children;return Object(r.jsxs)("div",{className:"simulation-box-template",children:[Object(r.jsx)("div",{className:"simulation-box-template-top",children:t}),n]})}),he=(n(137),function(e){var t=e.header,n=e.content,a=e.footer;return Object(r.jsxs)("div",{className:"chat-box-template",children:[Object(r.jsx)("div",{className:"chat-box-template-header",children:t}),Object(r.jsx)("div",{className:"chat-box-template-content",children:n}),Object(r.jsx)("div",{className:"chat-box-template-footer",children:a})]})}),Oe=(n(138),function(e){var t=e.content,n=e.footer;return Object(r.jsxs)("div",{className:"home-box-template",children:[Object(r.jsx)("div",{className:"home-box-template-content",children:t}),Object(r.jsx)("div",{className:"home-box-template-footer",children:n})]})}),xe=n(189),ve=n(190),ye=n(191),ge=n(192),Se=(n(139),function(e){var t=e.time,n=e.notifications,a=e.utilities;return Object(r.jsxs)("div",{className:"top-chat-template",children:[Object(r.jsx)("div",{className:"top-chat-box-time",children:t}),Object(r.jsx)("div",{className:"top-chat-box-notification",children:n.map((function(e,t){return Object(r.jsx)("div",{className:"top-chat-template-item",children:e},t)}))}),Object(r.jsx)("div",{className:"top-chat-box-utility",children:a.map((function(e,t){return Object(r.jsx)("div",{className:"top-chat-template-item",children:e},t)}))})]})}),ke=function(e){var t=e.render,n=Object(u.j)((function(e){return e.time.statedTime})),r=Object(u.j)((function(e){return e.time.resetTime})),i=Object(a.useState)(y(n,r)),o=Object(s.a)(i,2),c=o[0],d=o[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d(y(n,r))}),1e3);return function(){return clearInterval(e)}}),[d,n,r]),t(m.DateTime.fromISO(c).toLocaleString(m.DateTime.TIME_24_SIMPLE),m.DateTime.fromISO(c).toLocaleString(m.DateTime.DATE_FULL))},Ie=function(e){var t=e.hideClock,n=Object(u.j)((function(e){return e.storybook.isImmediate})),a=Object(u.j)((function(e){return e.player.isConnected})),i=Object(le.c)({from:{opacity:t?1:0},to:{opacity:t?0:1},immediate:n}),o=Object(u.j)((function(e){return e.chatroom.dataUnreadMessageFromPeopleCount}));return Object(r.jsx)(Se,{time:Object(r.jsx)(le.a.div,{style:i,children:Object(r.jsx)(ke,{render:function(e){return e}})}),notifications:Object(C.a)(o>0?[Object(r.jsx)(xe.a,{})]:[]),utilities:[a?Object(r.jsx)(ve.a,{}):Object(r.jsx)(ye.a,{}),Object(r.jsx)(ge.a,{})]})},Te=Ie;Ie.defaultProps={hideClock:!1};n(140);var we=function(e){var t=e.leftMenu,n=e.rightMenu,a=e.picture,i=e.title,o=e.subtitle;return Object(r.jsxs)("div",{className:"header-chat-template",children:[Object(r.jsx)("div",{className:"header-chat-left-menu",children:t}),Object(r.jsx)("div",{className:"header-chat-picture",children:a}),Object(r.jsxs)("div",{className:"header-chat-center",children:[Object(r.jsx)("div",{className:"header-chat-center-title",children:i}),Object(r.jsx)("div",{className:"header-chat-center-subtitle",children:o})]}),Object(r.jsx)("div",{className:"header-chat-right-menu",children:n})]})},Ae=n(193),Pe=(n(141),function(){return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"header-back-button",children:Object(r.jsx)(Ae.a,{})})})}),Me=n(194),Ne=(n(142),function(){return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"header-more-button",children:Object(r.jsx)(Me.a,{})})})}),De=(n(143),function(e){var t=e.imageUrl,n=e.children,a=e.black,i=e.circle;return Object(r.jsx)("div",{className:"full-page-image-template",style:{backgroundImage:"url(".concat(t,")"),borderRadius:i?"100%":"0%"},children:Object(r.jsx)("div",{className:"full-page-image-template-filler",style:{backgroundColor:"rgba(0, 0, 0, ".concat(a,")"),borderRadius:i?"100%":"0%"},children:n})})}),Ce=De;De.defaultProps={imageUrl:"",black:0,circle:!1};n(144);var Ee=function(e){var t=e.imageUrl;return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"header-profile-picture",children:Object(r.jsx)(Ce,{circle:!0,imageUrl:t})})})},Fe=(n(145),n(23)),Be=function(e){var t=e.value;return Object(r.jsx)("div",{className:"header-title-text",children:Object(r.jsx)(Fe.Emojione,{text:t})})},Re=(n(158),function(e){var t=e.value;return Object(r.jsx)("div",{className:"header-subtitle-text",children:t})}),_e=function(){var e=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),t="chatroom"===e.key?e.roomId:"",n=Object(u.j)((function(e){return e.chatroom.dataByRoomId(t)})),a=n?n.peopleId:"",i=Object(u.j)((function(e){return e.people.dataById(a)})),o=Object(u.j)((function(e){return e.time.statedTime})),c=Object(u.j)((function(e){return e.time.resetTime}));return Object(r.jsx)(we,{leftMenu:Object(r.jsx)(Pe,{}),rightMenu:Object(r.jsx)(Ne,{}),picture:Object(r.jsx)(Ee,{imageUrl:i.profilePicture}),title:Object(r.jsx)(Be,{value:i.name}),subtitle:Object(r.jsx)(Re,{value:i.isTyping?"mengetik...":i.isOnline?"online":"terakhir online ".concat(function(e){var t=v(o,c);return t.hasSame(e,"day")?e.toLocaleString(m.DateTime.TIME_24_SIMPLE):t.minus({days:1}).hasSame(e,"day")?"Kemarin":e.toLocaleString(m.DateTime.DATE_FULL)}(m.DateTime.fromISO(i.lastOnline)))})})},Le=(n(159),function(e){var t=e.leftMenu,n=e.centerMenu,a=e.rightMenu;return Object(r.jsxs)("div",{className:"footer-chat-template",children:[Object(r.jsx)("div",{className:"footer-chat-left-menu",children:t}),Object(r.jsx)("div",{className:"footer-chat-center-menu",children:n}),Object(r.jsx)("div",{className:"footer-chat-right-menu",children:a})]})}),Ue=Le;Le.defaultProps={leftMenu:Object(r.jsx)("div",{}),centerMenu:Object(r.jsx)("div",{}),rightMenu:Object(r.jsx)("div",{})};var He=n(195),ze=(n(160),function(){return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"footer-send-button",children:Object(r.jsx)(He.a,{})})})}),We=n(196),Ge=(n(161),function(){return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"footer-elipsis-button",children:Object(r.jsx)(We.a,{})})})}),Ye=(n(162),function(e){var t=e.value,n=e.isImmediate,a=e.isTyping,i=e.onClick,o=e.disable,c=Object(fe.a)(),u=Object(s.a)(c,2),d=u[0],l=u[1].height,f=Object(le.c)({from:{opacity:0},to:{opacity:1,height:l},immediate:n});return Object(r.jsx)("div",{className:"footer-text-box-container",style:{opacity:o?.7:1},children:Object(r.jsx)(le.a.div,{style:f,className:"footer-text-box",children:Object(r.jsx)("div",{ref:d,children:Object(r.jsxs)("div",{className:"footer-text-box-text",onClick:o?null:i,children:[Object(r.jsx)("span",{children:Object(r.jsx)(Fe.Emojione,{text:t})}),a?Object(r.jsx)("span",{className:"footer-text-box-cursor"}):null]})})})})}),Ke=Ye;Ye.defaultProps={value:"",isTyping:!1,isImmediate:!1};n(163);var Je=function(e){var t=e.value,n=e.isImmediate,a=e.onClick,i=e.isSelected,o=Object(fe.a)(),c=Object(s.a)(o,2),u=c[0],d=c[1].height,l=Object(le.c)({from:{opacity:0},to:{opacity:1,height:d},immediate:n});return Object(r.jsx)("div",{className:"footer-option-text-item-container",children:Object(r.jsx)(le.a.div,{style:l,className:i?"footer-option-text-item-selected":"footer-option-text-item",children:Object(r.jsx)("div",{ref:u,children:Object(r.jsx)("div",{className:"footer-option-text-item-text",onClick:a,children:Object(r.jsx)("span",{children:Object(r.jsx)(Fe.Emojione,{text:t})})})})})})},Ve=Je;Je.defaultProps={value:"",isTyping:!1,isImmediate:!1};n(164);var qe=function(e){var t=e.options,n=e.isImmediate,a=e.onSelect;return Object(r.jsx)("div",{className:"footer-option-text-box-container",children:t.map((function(e,t,i){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ve,{onClick:function(){return a(e.id)},value:e.message,isSelected:e.selected,isImmediate:n}),t<i.length-1?Object(r.jsx)("div",{className:"footer-option-text-box-separator"}):null]},e.id)}))})},Xe=qe;qe.defaultProps={value:"",isTyping:!1,isImmediate:!1};var Qe=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),n=Object(u.j)((function(e){return e.chatoption.dataSelectedOptByChatroomId(t.roomId)})),i=Object(u.j)((function(e){return e.chatoption.dataOptsByChatroomId(t.roomId)})),o=Object(u.h)((function(e){return e.chatoption.selectOption})),c=Object(u.h)((function(e){return e.chatoption.submitOption})),d=Object(u.h)((function(e){return e.chatoption.removeAllOptionsByChatroomIdAndTag})),l=Object(a.useState)(void 0!==n),f=Object(s.a)(l,2),p=f[0],m=f[1],b=Object(le.d)(n&&!p,null,{from:{opacity:0,transform:"translate3d(-100%,0,0)"},enter:{opacity:1,transform:"translate3d(0%,0,0)"},leave:{opacity:0,transform:"translate3d(50%,0,0)"},immediate:e}),j=function(){n&&n.selected&&(c({roomId:t.roomId,optId:n.id}),d({roomId:t.roomId,tag:n.meta.tag}))};return Object(r.jsx)(Ue,{centerMenu:n&&!p?Object(r.jsx)(Ke,{value:n.message,isImmediate:e,isTyping:!0,onClick:function(){m(!0)}}):void 0===i||0===i.length?Object(r.jsx)(Ke,{value:"",isImmediate:e,isTyping:!1,disable:!0}):Object(r.jsx)(Xe,{isImmediate:e,options:i.map((function(e){return{id:e.id,message:e.message,selected:e.selected}})),onSelect:function(e){m(!1),o({roomId:t.roomId,optId:e})}}),rightMenu:Object(r.jsx)("div",{style:{width:"100%",height:"100%",position:"relative"},children:b.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(le.a.div,{onClick:j,style:Object(h.a)(Object(h.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:t?Object(r.jsx)(ze,{}):Object(r.jsx)(Ge,{})},a)}))})})},Ze=(n(165),function(e){var t=e.items,n=e.isImmediate,a=t.map((function(e){return e})).reverse();return Object(r.jsx)("div",{className:"content-chat-template",children:a.map((function(e){return Object(r.jsx)(et,{isImmediate:n,children:e},e.key)}))})}),$e=Ze;Ze.defaultProps={items:[],isImmediate:!1};var et=function(e){var t=e.children,n=e.isImmediate,a=Object(fe.a)(),i=Object(s.a)(a,2),o=i[0],c=i[1].height,u=Object(le.c)({from:{opacity:0},to:{opacity:1,height:c},immediate:n});return Object(r.jsx)(le.a.div,{style:u,className:"content-chat-item",children:Object(r.jsx)("div",{ref:o,children:t})})};n(166);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var rt=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},a.createElement("path",{d:"M610 545 l-235 -235 -90 90 -91 90 -29 -30 -29 -31 119 -119 120 -120 265 265 265 265 -30 30 -30 30 -235 -235z"}));function at(e,t){var n=e.title,r=e.titleId,i=nt(e,["title","titleId"]);return a.createElement("svg",tt({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,rt)}var it=a.forwardRef(at);n.p;function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var st=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},a.createElement("path",{d:"M557 612 l-117 -118 28 -27 28 -27 119 120 119 119 -24 26 c-13 14 -26 25 -29 25 -4 0 -59 -53 -124 -118z"}),a.createElement("path",{d:"M713 518 l-213 -213 -90 90 -90 90 -27 -28 -28 -27 118 -118 117 -117 242 242 242 242 -24 26 c-13 14 -26 25 -29 25 -3 0 -102 -96 -218 -212z"}),a.createElement("path",{d:"M40 455 l-24 -26 109 -109 109 -110 28 27 28 27 -107 108 c-59 59 -110 108 -114 108 -3 0 -16 -11 -29 -25z"}));function ut(e,t){var n=e.title,r=e.titleId,i=ct(e,["title","titleId"]);return a.createElement("svg",ot({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,st)}var dt=a.forwardRef(ut);n.p;function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pt=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#4fc3f7",stroke:"none"},a.createElement("path",{d:"M557 612 l-117 -118 28 -27 28 -27 119 120 119 119 -24 26 c-13 14 -26 25 -29 25 -4 0 -59 -53 -124 -118z"}),a.createElement("path",{d:"M713 518 l-213 -213 -90 90 -90 90 -27 -28 -28 -27 118 -118 117 -117 242 242 242 242 -24 26 c-13 14 -26 25 -29 25 -3 0 -102 -96 -218 -212z"}),a.createElement("path",{d:"M40 455 l-24 -26 109 -109 109 -110 28 27 28 27 -107 108 c-59 59 -110 108 -114 108 -3 0 -16 -11 -29 -25z"}));function mt(e,t){var n=e.title,r=e.titleId,i=ft(e,["title","titleId"]);return a.createElement("svg",lt({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,pt)}var bt=a.forwardRef(mt),jt=(n.p,function(e){var t=e.isHeader,n=e.isFooter,a=e.text,i=e.time,o=e.isDelivered,c=e.isRead;return Object(r.jsxs)("div",{className:"chat-item-me-container",children:[t?Object(r.jsx)("div",{className:"chat-item-me-triangle"}):null,Object(r.jsxs)("div",{className:"chat-item-me-text ".concat(n?"chat-item-me-extra-bottom-margin":""),children:[Object(r.jsx)(Fe.Emojione,{text:a}),Object(r.jsxs)("div",{className:"chat-item-status-container",children:[Object(r.jsx)("span",{className:"chat-item-status-time",children:i}),c?Object(r.jsx)(bt,{className:"chat-item-status-tick chat-item-status-tick-opaque"}):o?Object(r.jsx)(dt,{className:"chat-item-status-tick"}):Object(r.jsx)(it,{className:"chat-item-status-tick"})]})]})]})}),ht=jt;jt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00",isRead:!1};n(167);var Ot=function(e){var t=e.isHeader,n=e.isFooter,a=e.text,i=e.time;return Object(r.jsxs)("div",{className:"chat-item-people-container",children:[t?Object(r.jsx)("div",{className:"chat-item-people-triangle"}):null,Object(r.jsxs)("div",{className:"chat-item-people-text ".concat(n?"chat-item-people-extra-bottom-margin":""),children:[Object(r.jsx)(Fe.Emojione,{text:a}),Object(r.jsx)("div",{className:"chat-item-status-container",children:Object(r.jsx)("span",{className:"chat-item-status-time",children:i})})]})]})},xt=Ot;Ot.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00"};n(168);var vt=function(e){var t=e.text;return Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"chat-item-notif",children:t})})},yt=vt;vt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00"};var gt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.time.statedTime})),n=Object(u.j)((function(e){return e.time.resetTime})),i=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),o="chatroom"===i.key?i.roomId:"",c=Object(u.j)((function(e){return e.chatroom.dataByRoomId(o)})),d=Object(a.useState)([]),l=Object(s.a)(d,2),f=l[0],p=l[1];return Object(a.useEffect)((function(){if(c){var e=[];c.chats.forEach((function(a,i,o){var c=function(e){return e.isMyChat?m.DateTime.fromISO(e.status.find((function(e){return"sent"===e.type})).time):m.DateTime.fromISO(e.status.find((function(e){return"received"===e.type})).time)},s=function(e){var r=v(t,n);return r.hasSame(e,"day")?"Hari Ini":r.minus({days:1}).hasSame(e,"day")?"Kemarin":e.toLocaleString(m.DateTime.DATE_FULL)};if(0===i){var u=s(c(a));e.push(Object(r.jsx)(yt,{text:u},a.id+"-info"))}else{var d=c(a),l=c(o[i-1]);if(!d.hasSame(l,"day")){var f=s(d);e.push(Object(r.jsx)(yt,{text:f},a.id+"-info"))}}var p=!1;(0===i||a.isMyChat!==o[i-1].isMyChat||!c(a).hasSame(c(o[i-1]),"day")||c(a).diff(c(o[i-1])).milliseconds>12e4)&&(p=!0);var b=!1;(i===o.length-1||a.isMyChat!==o[i+1].isMyChat||!c(a).hasSame(c(o[i+1]),"day")||c(o[i+1]).diff(c(a)).milliseconds>12e4)&&(b=!0);var j=c(a).toLocaleString(m.DateTime.TIME_24_SIMPLE);if(a.isMyChat){var h=a.status.find((function(e){return"read"===e.type})),O=a.status.find((function(e){return"delivered"===e.type}));e.push(Object(r.jsx)(ht,{isHeader:p,isFooter:b,time:j,text:a.message,isRead:h,isDelivered:O},a.id))}else e.push(Object(r.jsx)(xt,{isHeader:p,isFooter:b,time:j,text:a.message},a.id))})),p(e)}}),[c,n,t]),Object(r.jsx)($e,{items:f,isImmediate:e})},St=(n(169),function(e){var t=e.black,n=e.children;return Object(r.jsx)("div",{className:"full-page-darken",style:{backgroundColor:"rgba(0, 0, 0, ".concat(t,")")},children:n})}),kt=(n(170),function(e){var t=e.time,n=e.date;return Object(r.jsxs)("div",{className:"home-clock",children:[Object(r.jsx)("div",{className:"home-clock-time",children:t}),Object(r.jsx)("div",{className:"home-clock-date",children:n})]})}),It=function(){return Object(r.jsx)(St,{black:.2,children:Object(r.jsx)(se,{children:Object(r.jsx)(ke,{render:function(e,t){return Object(r.jsx)(kt,{time:e,date:t})}})})})},Tt=(n(171),function(e){var t=e.icon,n=e.opacity,i=e.count,o=e.isImmediate,c=Object(a.useState)(0),u=Object(s.a)(c,2),d=u[0],l=u[1],f=Object(a.useState)(!1),p=Object(s.a)(f,2),m=p[0],b=p[1];Object(a.useEffect)((function(){var e=i>99?"99+":i;d!==e&&l(e);var t=i>0;m!==t&&b(t)}),[d,l,m,b,i]);var j=Object(le.d)(m,null,{from:{opacity:0,transform:"translate3d(0,100%,0)"},enter:{opacity:1,transform:"translate3d(0,0%,0)"},leave:{opacity:0,transform:"translate3d(0,-50%,0)"},immediate:o});return Object(r.jsxs)("div",{className:"home-icon-container",children:[Object(r.jsx)("div",{className:"home-icon-badge-container",children:Object(r.jsx)("div",{style:{position:"relative"},children:j.map((function(e){var t=e.item,n=e.props,a=e.key;return t?Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},n),{},{position:"absolute"}),children:Object(r.jsx)("div",{className:"home-icon-badge",children:d})},a):null}))})}),Object(r.jsx)("div",{style:{opacity:n},children:t})]})}),wt=Tt;Tt.defaultProps={icon:null,opacity:.2,count:0,isImmediate:!1};var At=n(197),Pt=n(198),Mt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.chatroom.dataUnreadMessageFromPeopleCount})),n=Object(u.j)((function(e){return e.player.clicksById("home-icon-chat")})),a=Object(le.c)({to:{transform:n?"scale(0.925)":"scale(1)"},immediate:e,config:le.b.wobbly});return Object(r.jsx)(St,{black:.1,children:Object(r.jsx)(se,{children:Object(r.jsxs)(ae.b,{size:"large",children:[Object(r.jsx)(wt,{icon:Object(r.jsx)(At.a,{})}),Object(r.jsx)(wt,{icon:Object(r.jsx)(Pt.a,{})}),Object(r.jsx)(wt,{icon:Object(r.jsx)(oe.a,{})}),Object(r.jsx)(le.a.div,{style:a,children:Object(r.jsx)(wt,{icon:Object(r.jsx)(xe.a,{}),count:t,opacity:t>0?.5:void 0})})]})})})},Nt=(n(172),function(e){var t=e.picture,n=e.title,a=e.sub,i=e.time;return Object(r.jsx)("div",{className:"notification-chat-box-container",children:Object(r.jsxs)("div",{className:"notification-chat-box-item",children:[Object(r.jsx)("div",{className:"notification-chat-box-picture",children:Object(r.jsx)(Ce,{circle:!0,imageUrl:t})}),Object(r.jsxs)("div",{className:"notification-chat-box-text",children:[Object(r.jsx)("div",{className:"notification-chat-box-text-title",children:Object(r.jsx)(Fe.Emojione,{text:n})}),Object(r.jsx)("div",{className:"notification-chat-box-text-sub",children:Object(r.jsx)(Fe.Emojione,{text:a})})]}),Object(r.jsx)("div",{className:"notification-chat-box-time",children:i})]})})}),Dt=Nt;Nt.defaultProps={sub:"Subtitle Text",title:"Title Text",time:"00:00"};n(173);var Ct=function(e){var t=e.items,n=e.isImmediate,a=Object(le.d)(t,(function(e){return e.key}),{from:{opacity:0,transform:"translate3d(-30%,0,0)"},enter:{opacity:1,transform:"translate3d(0%,0,0)"},leave:{opacity:0,transform:"translate3d(30%,0,0)"},immediate:n});return Object(r.jsx)("div",{className:"notification-box-template",children:a.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(le.a.div,{style:n,className:"notification-box-template-item",children:t},a)}))})},Et=function(){var e=Object(u.j)((function(e){return e.notification.data}));return Object(r.jsx)(Ct,{items:e.filter((function(e){return"chat"===e.app&&!1===e.isDisplayed})).map((function(e){var t={};return e.messages.length>0&&(t=e.messages[e.messages.length-1]),Object(r.jsx)(Dt,{picture:e.picture,title:e.title,sub:t.message,time:m.DateTime.fromISO(t.time).toLocaleString(m.DateTime.TIME_24_SIMPLE)},e.id)}))})},Ft=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.display.dataById("defaultSimulation")})),n=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),a=Object(u.j)((function(e){return e.display.isHideChatbox})),i=Object(le.d)(n?n.key:null,null,{from:{transform:"translate3d(100%,0,0)"},enter:{transform:"translate3d(0%,0,0)"},leave:{transform:"translate3d(-100%,0,0)"},config:le.b.slow,immediate:e}),o=function(e){switch(e){case"home":return Object(r.jsx)(Oe,{content:Object(r.jsx)(It,{}),footer:Object(r.jsx)(Mt,{})});case"chatroom":return Object(r.jsx)(he,{header:Object(r.jsx)(_e,{}),content:Object(r.jsx)(gt,{}),footer:a?null:Object(r.jsx)(Qe,{})});default:return null}},c=!!t&&"home"===t.phase;return Object(r.jsx)(be,{children:Object(r.jsxs)(je,{top:Object(r.jsx)(Te,{hideClock:c}),children:[Object(r.jsx)("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:i.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:o(t)},a)}))}),Object(r.jsx)(Et,{})]})})},Bt=n(184),Rt=n(187),_t=function(){var e=Object(u.j)((function(e){return e.display.dataById("defaultCredit")}));return Object(r.jsxs)("div",{style:{overflow:"hidden",height:"100%",padding:"10px",maxWidth:"1000px",margin:"auto"},children:[Object(r.jsx)("div",{style:{padding:"10px 20px",fontSize:"30px",fontWeight:"bold",marginTop:"200px"},children:"CREDIT"}),Object(r.jsx)(Bt.a,{gutter:[10,10],children:e&&e.list.map((function(e,t){return Object(r.jsx)(Rt.a,{flex:"0 1 300px",children:Object(r.jsx)(Lt,{title:e.title,subtitle:e.subtitle,focus:e.focus})},t)}))})]})},Lt=function(e){var t=e.title,n=e.subtitle,i=e.focus,o=Object(a.useRef)(null);return Object(a.useEffect)((function(){i&&o.current.scrollIntoView({behavior:"smooth"})}),[i]),Object(r.jsxs)("div",{ref:o,style:{padding:"10px 20px"},children:[Object(r.jsx)("div",{style:{fontSize:"30px",fontWeight:"bold"},children:t}),Object(r.jsx)("div",{children:n})]})},Ut=[{key:"defaultTitle",comp:me},{key:"defaultSimulation",comp:Ft},{key:"defaultOutro",comp:function(){return Object(r.jsx)(se,{children:Object(r.jsxs)("div",{style:{padding:"20px"},children:[Object(r.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold"},children:"THANKS FOR WATCHING"}),Object(r.jsx)("div",{children:"by Social Story Project"})]})})}},{key:"defaultCredit",comp:_t}],Ht=(n(174),function(e){var t=e.stacks;return Object(r.jsx)("div",{className:"stack-template-container",children:t.map((function(e,t){return Object(r.jsx)("div",{className:"stack-template-item",children:e},t)}))})}),zt=Ht;Ht.defaultProps={stacks:[]};var Wt=n(179),Gt=function(){var e=Object(u.j)((function(e){return e.audio.data}));return Object(r.jsx)("div",{children:e.map((function(e){return Object(r.jsx)(Yt,{play:!0,id:e.id,src:e.src,loop:e.loop,mute:e.muted,volume:e.volume,startSimTime:e.startSimTime},e.id)}))})},Yt=function(e){var t=e.id,n=e.play,i=e.src,o=e.loop,c=e.mute,d=e.volume,l=e.startSimTime,f=Object(u.h)((function(e){return e.audio.stopAudio})),p=Object(u.j)((function(e){return e.time.simulationStartTime})),m=Object(u.j)((function(e){return e.time.simulationOffsetDuration})),b=Object(u.j)((function(e){return e.storybook.isImmediate})),j=Object(Wt.a)({src:i,loop:o,onEnded:function(){return f({id:t})}}),h=Object(s.a)(j,3),O=h[0],x=h[1],v=h[2],y=x.paused,S=x.muted,k=x.volume,I=x.duration>0,T=x.duration;return Object(a.useEffect)((function(){if(!b){if(n&&y&&I){var e=(g(p,m)-l)/1e3;e<T?(v.play(),v.seek(e)):o&&(e%=T,v.play(),v.seek(e))}else n||y||v.pause();c&&!S?v.mute():!c&&S&&v.unmute(),d!==k&&v.volume(d)}}),[o,T,l,I,b,p,m,y,S,k,n,c,d,v]),Object(r.jsx)("div",{children:O})};Yt.defaultProps={id:"",play:!0,src:"",loop:!1,mute:!1,volume:1};var Kt=n(180),Jt=function(e){var t=e.black,n=e.play,i=e.src,o=e.loop,c=e.mute,d=e.volume,l=e.startSimTime,f=Object(Kt.a)(Object(r.jsx)("video",{src:i,loop:o,style:{opacity:1-t,minHeight:"100%",minWidth:"100%",objectFit:"cover",marginLeft:"50vw",transform:"translate(-50%)"}})),p=Object(s.a)(f,3),m=p[0],b=p[1],j=p[2],h=Object(u.j)((function(e){return e.time.simulationStartTime})),O=Object(u.j)((function(e){return e.time.simulationOffsetDuration})),x=Object(u.j)((function(e){return e.storybook.isImmediate})),v=b.paused,y=b.muted,S=b.volume,k=b.duration>0,I=b.duration;return Object(a.useEffect)((function(){if(!x){if(n&&v&&k){var e=(g(h,O)-l)/1e3;e<I?(j.play(),j.seek(e)):o&&(e%=I,j.play(),j.seek(e))}else n||v||j.pause();c&&!y?j.mute():!c&&y&&j.unmute(),d!==S&&j.volume(d)}}),[o,I,l,k,x,h,O,v,y,S,n,c,d,j]),m},Vt=Jt;Jt.defaultProps={black:0,loop:!1};var qt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.display.dataById("background")})),n={id:t?t.key:"",type:t&&t.type?t.type:"img",src:t?t.src:"",black:t&&void 0!==t.black?t.black:.8,loop:!!t&&t.loop,mute:!!t&&t.mute,volume:t?t.volume:1,startSimTime:t?t.startSimTime:0},a=Object(le.d)(n,(function(e){return e.id}),{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},immediate:e,config:{duration:2e3}});return Object(r.jsx)("div",{style:{position:"relative",display:"flex",flex:"1"},children:a.map((function(e){var t=e.item,n=e.props,a=e.key;return t?Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:"img"===t.type?Object(r.jsx)(Ce,{imageUrl:t.src,black:t.black}):"vid"===t.type?Object(r.jsx)(Vt,{play:!0,src:t.src,black:t.black,loop:t.loop,mute:t.mute,volume:t.volume,startSimTime:t.startSimTime}):null},a):null}))})},Xt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.display.dataById("play")})),n=t?t.page:void 0,a=Object(le.d)(n,(function(e){return e}),{from:{opacity:0,transform:"translate3d(0,100%,0)"},enter:{opacity:1,transform:"translate3d(0,0%,0)"},leave:{opacity:0,transform:"translate3d(0,-50%,0)"},immediate:e});return Object(r.jsx)(zt,{stacks:[Object(r.jsx)(Gt,{}),Object(r.jsx)(qt,{}),Object(r.jsx)("div",{style:{position:"relative",display:"flex",flex:"1"},children:a.map((function(e){var t=e.item,n=e.props,a=e.key;if(t){var i=Ut.find((function(e){return e.key===t})).comp;return Object(r.jsx)(le.a.div,{style:Object(h.a)(Object(h.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:Object(r.jsx)(i,{})},a)}return null}))})]})},Qt=function(){var e=Object(te.e)("story-id",te.d),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(te.e)("start-from",te.b),c=Object(s.a)(o,1)[0],d=Object(te.e)("start-from-tag",te.d),l=Object(s.a)(d,1)[0],f=Object(te.e)("pause-at",te.b),p=Object(s.a)(f,1)[0],m=Object(te.e)("pause-at-tag",te.d),b=Object(s.a)(m,1)[0],j=Object(te.e)("mute",te.a),h=Object(s.a)(j,1)[0],O=Object(te.e)("hide-chatbox",te.a),x=Object(s.a)(O,1)[0],v=Object(a.useState)(!1),y=Object(s.a)(v,2),g=y[0],S=y[1],k=Object(u.h)((function(e){return e.storybook.startStory})),I=Object(u.h)((function(e){return e.storybook.setTargetActiveStoryStepIndex})),T=Object(u.h)((function(e){return e.storybook.setTargetActiveStoryStepTag})),w=Object(u.h)((function(e){return e.storybook.setPauseAtStoryStepIndex})),A=Object(u.h)((function(e){return e.storybook.setPauseAtStoryStepTag})),P=Object(u.h)((function(e){return e.audio.setMute})),M=Object(u.h)((function(e){return e.display.setHideChatbox})),N=Object(u.j)((function(e){return e.storybook.isPlaying})),D=Object(u.j)((function(e){return e.storybook.isImmediate}));return Object(a.useEffect)((function(){l?T(l):c&&I(c),b?A(b):p&&w(p),h&&P(h),x&&M(x),!g&&n&&(k(n),S(!0))}),[n,k,g,S,c,I,l,T,p,w,b,A,h,P,x,M]),Object(r.jsx)(re,{mark:Object(r.jsx)(ce,{}),children:D?Object(r.jsx)(re,{children:"loading..."}):N?Object(r.jsx)(Xt,{}):n?null:Object(r.jsx)(de,{onStoryClicked:function(e){return i(e)}})})},Zt=(n(175),function(){return Object(r.jsx)(re,{children:Object(r.jsx)(zt,{stacks:[Object(r.jsx)(Ce,{imageUrl:"http://localhost:5001/images/people.jpg",black:.8}),Object(r.jsx)(se,{children:Object(r.jsx)("div",{className:"logo",children:"SOCIAL STORY"})})]})})}),$t=n(90),en=n(14),tn=Object(u.e)($,ee),nn=function(e){var t=e.children,n=Object(u.h)((function(e){return e.master.init})),i=Object(u.j)((function(e){return e.master.isInitialized})),o=Object(u.i)(),c=Object(a.useState)(!1),d=Object(s.a)(c,2),l=d[0],f=d[1];return!l&&o&&(n(),f(!0)),i?t:Object(r.jsx)(re,{})};var rn=function(){return Object(r.jsx)(u.a,{store:tn,children:Object(r.jsx)($t.a,{children:Object(r.jsx)(te.c,{ReactRouterRoute:en.a,children:Object(r.jsx)(nn,{children:Object(r.jsxs)(en.c,{children:[Object(r.jsx)(en.a,{exact:!0,path:"/logo",component:Zt}),Object(r.jsx)(en.a,{path:"*",children:Object(r.jsx)(Qt,{})})]})})})})})},an=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,199)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(rn,{})}),document.getElementById("root")),an()},80:function(e){e.exports=JSON.parse('{"a":"0.3.0"}')},99:function(e,t,n){}},[[177,1,2]]]);
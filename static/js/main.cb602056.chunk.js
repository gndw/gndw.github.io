(this["webpackJsonpsocial-story-web-display"]=this["webpackJsonpsocial-story-web-display"]||[]).push([[0],{110:function(e){e.exports=JSON.parse('{"a":"0.3.2"}')},144:function(e,t,n){},145:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},169:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},248:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),o=n(25),c=n.n(o),s=(n(144),n(11)),u=(n(145),n(2)),d={version:void 0},l=n(3),f=n.n(l),m=n(7),p=n(10),b={init:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=r.getStoreState,o=r.getStoreActions,c=a.storyService,e.next=4,c.init({getStoreState:i,getStoreActions:o});case 4:p.Settings.defaultLocale="id",String.prototype.formatUnicorn=String.prototype.formatUnicorn||function(){var e=this.toString();if(arguments.length){var t,n=typeof arguments[0],r="string"===n||"number"===n?Array.prototype.slice.call(arguments):arguments[0];for(t in r)e=e.replace(new RegExp("\\{"+t+"\\}","gi"),r[t])}return e},t.setInitialized();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),setInitialized:Object(u.b)((function(e){e.isInitialized=!0})),isInitialized:!1},j={fetchAvailableStories:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=a.dataService,e.next=4,i.fetchAvailableStories();case 4:e.sent.forEach((function(e){return t.addAvailableStory(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),availableStories:[],addAvailableStory:Object(u.b)((function(e,t){e.availableStories.push(t)})),startStory:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l,m,p,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.injections,i=r.getState,o=a.storyService,c=a.dataService,s=a.logService,u=i().availableStories,d=u.find((function(e){return e.id===n}))){e.next=12;break}return e.next=7,c.fetchAvailableStories();case 7:if(l=e.sent,d=l.find((function(e){return e.id===n}))){e.next=12;break}return s.error("Story with id: ".concat(n," is not found!")),e.abrupt("return");case 12:return e.next=14,c.fetchAndValidateStory(d.src);case 14:return m=e.sent,p=m.data,(b=m.error)&&s.error(b),t.setActiveStory({storyId:p,storyStepIndex:0}),e.next=21,t.validateStoryTag();case 21:o.play();case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),continueStory:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,i=r.getState,o=a.storyService,c=a.dataService,s=a.logService,e.next=4,c.getStoryStepIndexWithTag(i().activeStoryId,n.next);case 4:u=e.sent,d=u.data,(l=u.error)&&s.error(l),t.setActiveStory({storyId:i().activeStoryId,storyStepIndex:d}),o.continue();case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),isPlaying:!1,isFinished:!1,activeStoryId:"",activeStoryStepIndex:0,setActiveStory:Object(u.b)((function(e,t){e.isPlaying=!0,e.activeStoryId=t.storyId,e.activeStoryStepIndex=t.storyStepIndex})),stopActiveStory:Object(u.b)((function(e,t){e.isFinished=!0,e.activeStoryId=void 0,e.activeStoryStepIndex=void 0})),targetActiveStoryStepIndex:0,setTargetActiveStoryStepIndex:Object(u.b)((function(e,t){e.targetActiveStoryStepIndex=t})),targetActiveStoryStepTag:void 0,setTargetActiveStoryStepTag:Object(u.b)((function(e,t){e.targetActiveStoryStepTag=t})),isImmediate:Object(u.d)((function(e){return e.activeStoryStepIndex<e.targetActiveStoryStepIndex})),pauseAtStoryStepIndex:-1,setPauseAtStoryStepIndex:Object(u.b)((function(e,t){e.pauseAtStoryStepIndex=t})),pauseAtStoryStepTag:void 0,setPauseAtStoryStepTag:Object(u.b)((function(e,t){e.pauseAtStoryStepTag=t})),isPauseHere:Object(u.d)((function(e){return e.activeStoryStepIndex===e.pauseAtStoryStepIndex})),validateStoryTag:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.injections,void 0===(i=r.getState)().targetActiveStoryStepTag){e.next=7;break}return o=a.dataService,c=a.logService,e.next=5,o.getStoryStepIndexWithTag(i().activeStoryId,i().targetActiveStoryStepTag);case 5:(s=e.sent).error?c.error(s.error):t.setTargetActiveStoryStepIndex(s.data);case 7:if(void 0===i().pauseAtStoryStepTag){e.next=13;break}return u=a.dataService,d=a.logService,e.next=11,u.getStoryStepIndexWithTag(i().activeStoryId,i().pauseAtStoryStepTag);case 11:(l=e.sent).error?d.error(l.error):t.setPauseAtStoryStepIndex(l.data);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},h={data:[],dataByKey:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.key===t}))}})),setDataByKey:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.key===t.key}));n<0?e.data.push({key:t.key,value:t.value}):e.data[n].value=t.value})),incrementDataByKey:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.key===t.key}));n<0?e.data.push({key:t.key,value:t.value?t.value:1}):e.data[n].value+=t.value?t.value:1})),decrementDataByKey:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.key===t.key}));n>=0&&(e.data[n].value-=t.value?t.value:1)}))},O=n(12),x={data:[],dataById:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),setData:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n<0?e.data.push(t):e.data[n]=Object(O.a)(Object(O.a)({},e.data[n]),t)})),removeData:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n>=0&&e.data.splice(n,1)})),isHideChatbox:!1,setHideChatbox:Object(u.b)((function(e,t){e.isHideChatbox=t}))},v={setStatedTime:Object(u.b)((function(e,t){e.resetTime=p.DateTime.local().toISO(),e.statedTime=p.DateTime.fromISO(t).toISO()})),addStatedTime:Object(u.b)((function(e,t){var n=p.Duration.fromObject({milliseconds:t});e.statedTime=p.DateTime.fromISO(e.statedTime).plus(n).toISO()})),startSimulationStartTime:Object(u.b)((function(e,t){e.simulationStartTime=p.DateTime.local().toISO(),e.simulationOffsetDuration=0})),addSimulationOffsetTime:Object(u.b)((function(e,t){e.simulationOffsetDuration=e.simulationOffsetDuration+t})),wait:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,r.getStoreState)().storybook.isImmediate){e.next=6;break}return e.next=4,new Promise((function(e){return setTimeout(e,n)}));case 4:e.next=8;break;case 6:t.addStatedTime(n),t.addSimulationOffsetTime(n);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),resetTime:"2020-05-25T10:24:15",statedTime:"2020-05-25T09:24:15",simulationStartTime:p.DateTime.local().toISO(),simulationOffsetDuration:0},y=function(e,t){var n=p.DateTime.local().diff(p.DateTime.fromISO(t));return p.DateTime.fromISO(e).plus(n)},g=function(e,t){var n=p.DateTime.local().diff(p.DateTime.fromISO(t));return p.DateTime.fromISO(e).plus(n).toISO()},S=function(e,t){return p.DateTime.local().diff(p.DateTime.fromISO(e)).plus(p.Duration.fromObject({milliseconds:t})).toObject().milliseconds},k={data:[],dataById:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),setPeopleData:Object(u.b)((function(e,t){if(t.id){var n=e.data.findIndex((function(e){return e.id===t.id}));n<0?e.data.push({id:t.id,name:void 0!==t.name?t.name:"Unnamed Contact",profilePicture:void 0!==t.profilePicture?t.profilePicture:"",isOnline:void 0!==t.isOnline&&t.isOnline,isTyping:void 0!==t.isTyping&&t.isTyping,isFocus:void 0===t.isFocus||t.isFocus,lastOnline:void 0!==t.lastOnline?t.lastOnline:g(e.statedTimeFromTime,e.resetTimeFromTime),isBlockingMe:void 0!==t.isBlockingMe&&t.isBlockingMe,isConnectedToNetwork:void 0===t.isConnectedToNetwork||t.isConnectedToNetwork}):e.data[n]=Object(O.a)(Object(O.a)({},e.data[n]),t)}})),setPeopleOnline:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isOnline=!0)})),setPeopleOffline:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));n>=0&&(e.data[n].isOnline=!1,e.data[n].lastOnline=g(e.statedTimeFromTime,e.resetTimeFromTime))})),setPeopleFocus:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isFocus=!0)})),setPeopleUnfocus:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isFocus=!1)})),setPeopleTyping:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isTyping=!0)})),setPeopleNotTyping:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t}));n>=0&&(e.data[n].isTyping=!1)})),resetTimeFromTime:Object(u.d)([function(e,t){return t.time.resetTime}],(function(e){return e})),statedTimeFromTime:Object(u.d)([function(e,t){return t.time.statedTime}],(function(e){return e}))},I=n(256),T=function(e,t){return{type:"received",time:g(e,t)}},w={data:[],sendMessageFromPeopleToMe:Object(u.b)((function(e,t){if(t.id&&t.message){var n,r=(n=t.message,{id:Object(I.a)(),type:"message",message:n,isMyChat:!1,status:[]}),a=T(e.statedTimeFromTime,e.resetTimeFromTime);r.status.push(a);var i=e.data.findIndex((function(e){return"conversation"===e.type&&e.peopleId===t.id}));i>=0&&e.data[i].chats.push(r)}})),sendMessageFromMeToPeople:Object(u.b)((function(e,t){if(t.id&&t.message){var n,r,a,i=(n=t.message,{id:Object(I.a)(),type:"message",message:n,isMyChat:!0,status:[]}),o=(r=e.statedTimeFromTime,a=e.resetTimeFromTime,{type:"sent",time:g(r,a)});i.status.push(o);var c=e.data.findIndex((function(e){return"conversation"===e.type&&e.peopleId===t.id}));c>=0&&e.data[c].chats.push(i)}})),sendImageFromPeopleToMe:Object(u.b)((function(e,t){if(t.id&&t.imageURL){var n,r=(n=t.imageURL,{id:Object(I.a)(),type:"image",imageURL:n,isMyChat:!1,status:[]}),a=T(e.statedTimeFromTime,e.resetTimeFromTime);r.status.push(a);var i=e.data.findIndex((function(e){return"conversation"===e.type&&e.peopleId===t.id}));i>=0&&e.data[i].chats.push(r)}})),onPeopleCreated:Object(u.c)((function(e,t){return[t.people.setPeopleData]}),(function(e,t){if(!e.dataConversationByPeopleId(t.payload.id)){var n=(r=t.payload.id,{id:Object(I.a)(),type:"conversation",peopleId:r,chats:[]});e.data.push(n)}var r})),dataConversationByPeopleId:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return"conversation"===e.type&&e.peopleId===t}))}})),dataByRoomId:Object(u.d)((function(e){return function(t){return e.data.find((function(e){return e.id===t}))}})),dataUnreadMessageFromPeopleCount:Object(u.d)((function(e){var t=0;return e.data.forEach((function(e){e.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||(t+=1))}))})),t})),dataUnreadMessageFromPeople:Object(u.d)((function(e){return function(t){var n=[];return e.data.forEach((function(e){e.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||n.push(e))}))})),n}})),onCheckMyMessageToBeDelivered:Object(u.g)((function(e,t){return[e.sendMessageFromMeToPeople,t.player.setConnectivity]}),function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getStoreState,i=r.getStoreActions,!a().player.isConnected){e.next=6;break}return e.next=5,i().time.wait(500);case 5:a().chatroom.data.forEach((function(e){var n=a().people.dataById(e.peopleId);!n.isBlockingMe&&n.isConnectedToNetwork&&e.chats.forEach((function(n){n.isMyChat&&(void 0!==n.status.find((function(e){return"sent"===e.type}))&&void 0===n.status.find((function(e){return"delivered"===e.type}))&&t.setMessageAsDelivered({roomId:e.id,messageId:n.id}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),onCheckMyMessageToBeRead:Object(u.g)((function(e,t){return[e.setMessageAsDelivered,t.player.setConnectivity,t.people.setPeopleFocus,t.people.setPeopleOnline]}),function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getStoreState,i=r.getStoreActions,!a().player.isConnected){e.next=6;break}return e.next=5,i().time.wait(500);case 5:a().chatroom.data.forEach((function(e){e.chats.forEach((function(n){n.isMyChat&&(void 0!==n.status.find((function(e){return"delivered"===e.type}))&&a().people.dataById(e.peopleId).isOnline&&a().people.dataById(e.peopleId).isFocus&&t.setMessageAsRead({roomId:e.id,messageId:n.id}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),onCheckToReadAllMessagesFromPeople:Object(u.g)((function(e,t){return[t.player.openSimulationChatRoom,e.sendMessageFromPeopleToMe,e.sendImageFromPeopleToMe]}),function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,u,d,l,m,p,b,j,h,O;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getState,i=r.getStoreState,o=r.getStoreActions,c=function(e){var n=a().dataByRoomId(e);n.chats.forEach((function(e){e.isMyChat||(e.status.find((function(e){return"read"===e.type}))||t.setMessageAsRead({roomId:n.id,messageId:e.id}))}))},u=Object(s.a)(n.resolvedTargets,3),d=u[0],l=u[1],m=u[2],e.t0=n.type,e.next=e.t0===d?6:e.t0===m||e.t0===l?11:15;break;case 6:return e.next=8,o().time.wait(500);case 8:return"chatroom"===(p=i().player.getSelectedSimulationData).key&&(b=p.roomId,n.payload.roomId===b&&c(b)),e.abrupt("break",16);case 11:return j=a().dataConversationByPeopleId(n.payload.id),"chatroom"===(h=i().player.getSelectedSimulationData).key&&(O=h.roomId,j.id===O&&c(O)),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),setMessageAsDelivered:Object(u.b)((function(e,t){if(t.roomId&&t.messageId){var n,r,a=e.data.findIndex((function(e){return e.id===t.roomId}));if(a>=0){var i=e.data[a].chats.findIndex((function(e){return e.id===t.messageId}));if(i>=0){var o=(n=e.statedTimeFromTime,r=e.resetTimeFromTime,{type:"delivered",time:g(n,r)});e.data[a].chats[i].status.push(o)}}}})),setMessageAsRead:Object(u.b)((function(e,t){if(t.roomId&&t.messageId){var n,r,a=e.data.findIndex((function(e){return e.id===t.roomId}));if(a>=0){var i=e.data[a].chats.findIndex((function(e){return e.id===t.messageId}));if(i>=0){var o=(n=e.statedTimeFromTime,r=e.resetTimeFromTime,{type:"read",time:g(n,r)});e.data[a].chats[i].status.push(o)}}}})),resetTimeFromTime:Object(u.d)([function(e,t){return t.time.resetTime}],(function(e){return e})),statedTimeFromTime:Object(u.d)([function(e,t){return t.time.statedTime}],(function(e){return e}))},A={isTyping:!1,setIsTyping:Object(u.b)((function(e,t){e.isTyping=t})),isTypingEmoji:!1,setIsTypingEmoji:Object(u.b)((function(e,t){e.isTypingEmoji=t})),isInTypingMode:!1,setIsInTypingMode:Object(u.b)((function(e,t){e.isInTypingMode=t})),typeText:"",setTypeText:Object(u.b)((function(e,t){e.typeText=t})),setTypingProcess:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getStoreState,i=r.getStoreActions,t.setIsInTypingMode(!0),o=0;case 3:if(!(o<n.length)){e.next=14;break}if("string"!==typeof n[o]){e.next=8;break}return e.delegateYield(f.a.mark((function e(){var r,c,s,u,d,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){for(var t=[],n=0;n<e.length;n++)":"===e[n]&&t.push(n);var r=[];if(t.length>=2)for(var a=0;a<t.length-1;a++){var i=e.substring(t[a]+1,t[a+1]);i.length>0&&!i.includes(" ")&&r.push({from:t[a],to:t[a+1],text:i})}var o=[],c=-1;r.length>0&&(c=0);for(var s=0;s<e.length;s++)c>=0&&r[c].from===s?(o.push(e.substring(r[c].from,r[c].to+1)),s=r[c].to,c<r.length-1&&(c+=1)):o.push(e[s]);return o},c=function(e,t){return e.reduce((function(e,n,r){return r<=t?e+n:e}),"")},s=function(){var e=Object(m.a)(f.a.mark((function e(n,r,o){var s,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){var e=Object(m.a)(f.a.mark((function e(r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c(n,r),!!n[r]&&n[r].length>1){e.next=12;break}if(a().chattyping.isTyping){e.next=7;break}return e.next=6,i().time.wait(350);case 6:t.setIsTyping(!0);case 7:return t.setTypeText(o),e.next=10,i().time.wait(50);case 10:e.next=25;break;case 12:if(!a().chattyping.isTyping){e.next=18;break}return t.setIsTyping(!1),e.next=16,i().time.wait(350);case 16:e.next=20;break;case 18:return e.next=20,i().time.wait(250);case 20:return t.setTypeText(o),t.setIsTypingEmoji(!0),e.next=24,i().time.wait(50);case 24:t.setIsTypingEmoji(!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!(r<o)){e.next=11;break}u=r;case 3:if(!(u<=o)){e.next=9;break}return e.next=6,s(u);case 6:u++,e.next=3;break;case 9:e.next=19;break;case 11:if(!(r>o)){e.next=19;break}d=r;case 13:if(!(d>=o-1)){e.next=19;break}return e.next=16,s(d);case 16:d--,e.next=13;break;case 19:a().chattyping.isTyping&&t.setIsTyping(!1);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),u=r(a().chattyping.typeText),d=r(n[o]),l=0,p=0;case 7:if(!(p<u.length&&p<d.length)){e.next=16;break}if(u[p]!==d[p]){e.next=12;break}l+=1,e.next=13;break;case 12:return e.abrupt("break",16);case 13:p++,e.next=7;break;case 16:return e.next=18,i().time.wait(250);case 18:return e.next=20,s(u,u.length,l);case 20:return e.next=22,i().time.wait(750);case 22:return e.next=24,s(d,l,d.length);case 24:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:e.next=11;break;case 8:if("number"!==typeof n[o]){e.next=11;break}return e.next=11,i().time.wait(n[o]);case 11:o++,e.next=3;break;case 14:t.setTypeText(""),t.setIsInTypingMode(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},M={data:[],dataOptByChatroomIdAndOptId:Object(u.d)((function(e){return function(t,n){var r=e.data.find((function(e){return e.chatroomId===t}));if(r)return r.options.find((function(e){return e.id===n}))}})),dataOptsByChatroomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.options}})),dataSelectedOptByChatroomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.options.find((function(e){return e.selected}))}})),dataPeopleIdByRoomId:Object(u.d)((function(e){return function(t){var n=e.data.find((function(e){return e.chatroomId===t}));if(n)return n.peopleId}})),addOptions:Object(u.f)((function(e,t,n){var r=n.getStoreState,a=(n.getStoreActions,n.injections);if(t.id&&t.options&&t.tag){var i=a.logService,o=r().chatroom.dataConversationByPeopleId(t.id);if(o){var c=o.id,s=r().storybook.activeStoryId;t.options.forEach((function(n){e.addOption({chatroomId:c,mesaage:n.message,next:n.next,storyId:s,tag:t.tag})}))}else i.error("Cannot added options: Conversation Room for ".concat(t.id," not found!"))}})),addOption:Object(u.b)((function(e,t){var n,r,a,i,o,c=(n=t.mesaage,r=t.next,a=t.storyId,i=t.tag,{id:Object(I.a)(),message:n,next:r,meta:{storyId:a,tag:i}}),s=e.data.findIndex((function(e){return e.roomId===t.roomId}));if(s<0){var u=(o=t.chatroomId,{id:Object(I.a)(),chatroomId:o,options:[]});u.options.push(c),e.data.push(u)}else e.data[s].options.push(c)})),selectOption:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.chatroomId===t.roomId}));n>=0&&(e.data[n].options=e.data[n].options.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{selected:e.id===t.optId})})))})),submitOption:Object(u.f)((function(e,t,n){var r=n.getStoreState,a=n.getStoreActions,i=(n.injections,r().chatoption.dataOptByChatroomIdAndOptId(t.roomId,t.optId));if(i){var o=r().chatroom.dataByRoomId(t.roomId).peopleId;a().chatroom.sendMessageFromMeToPeople({id:o,message:i.message}),a().storybook.continueStory({next:i.next})}})),removeAllOptionsByChatroomIdAndTag:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.chatroomId===t.roomId}));n>=0&&(e.data[n].options=e.data[n].options.filter((function(e){return e.meta.tag!==t.tag})))}))},P={isConnected:!0,setConnectivity:Object(u.b)((function(e,t){e.isConnected=t})),simulationData:[{key:"home",selected:!0}],addSimulationData:Object(u.b)((function(e,t){var n=e.simulationData.findIndex((function(e){return e.key===t.key}));n>=0?e.simulationData[n]=Object(O.a)(Object(O.a)({},e.simulationData[n]),t):e.simulationData.push(Object(O.a)({},t))})),selectSimulationData:Object(u.b)((function(e,t){e.simulationData=e.simulationData.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{selected:e.key===t.key})}))})),getSelectedSimulationData:Object(u.d)((function(e){return e.simulationData.find((function(e){return e.selected}))})),openSimulationChatRoom:Object(u.f)((function(e,t){e.addSimulationData({key:"chatroom",roomId:t.roomId}),e.selectSimulationData({key:"chatroom"})})),openSimulationHome:Object(u.f)((function(e,t){e.selectSimulationData({key:"home"})})),clicks:[],clicksById:Object(u.d)((function(e){return function(t){return e.clicks.includes(t)}})),addClick:Object(u.b)((function(e,t){return e.clicks.push(t)})),removeClick:Object(u.b)((function(e,t){return e.clicks=e.clicks.filter((function(e){return e!==t}))})),clickHomeIconChatRoom:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getStoreActions,i="home-icon-chat",t.addClick(i),e.next=5,a().time.wait(500);case 5:return t.removeClick(i),e.next=8,a().time.wait(1e3);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},N={data:[],displayChatNotification:Object(u.b)((function(e,t){var n=e.data.findIndex((function(e){return e.id===t.id}));if(n<0){var r={id:t.id,app:"chat",isDisplayed:!1,picture:t.picture,title:t.title,messages:[{message:t.message,time:t.time}]};e.data.push(r)}else e.data[n].isDisplayed=!1,e.data[n].picture=t.picture,e.data[n].title=t.title,e.data[n].messages.push({message:t.message,time:t.time})})),hideNotification:Object(u.b)((function(e,t){for(var n=0;n<e.data.length;n++)e.data[n].isDisplayed=!0})),showTriggerId:void 0,setShowTriggerId:Object(u.b)((function(e,t){e.showTriggerId=t})),onCheckToMakeMessageAsNotification:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromPeopleToMe,t.chatroom.sendImageFromPeopleToMe]}),function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d,l,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.getState,a=r.getStoreState,i=r.getStoreActions,o=a().chatroom.dataConversationByPeopleId(n.payload.id),c=a().player.getSelectedSimulationData,s="chatroom"!==c.key,u="chatroom"===c.key&&c.roomId!==o.id,!s&&!u){e.next=14;break}return d=a().people.dataById(n.payload.id),l={id:"people"+n.payload.id,picture:d.profilePicture,title:d.name,message:n.payload.message,time:g(a().chatroom.statedTimeFromTime,a().chatroom.resetTimeFromTime)},t.displayChatNotification(l),m=Object(I.a)(),t.setShowTriggerId(m),e.next=13,i().time.wait(3e3);case 13:a().notification.showTriggerId===m&&(t.setShowTriggerId(void 0),t.hideNotification());case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),isNoNotificationActive:Object(u.d)((function(e){return e.data.every((function(e){return e.isDisplayed}))}))},D={data:[],isMuted:!1,setMute:Object(u.b)((function(e,t){e.isMuted=t})),playAudio:Object(u.b)((function(e,t){var n={id:t.id?t.id:Object(I.a)(),loop:!0,src:t.src,volume:void 0!==t.volume?t.volume:1,muted:e.isMuted,startSimTime:S(e.simulationStartTime,e.simulationOffsetDuration)};e.data.push(n)})),playAudioOnetime:Object(u.b)((function(e,t){var n={id:t.id?t.id:Object(I.a)(),loop:!1,src:t.src,volume:void 0!==t.volume?t.volume:1,muted:e.isMuted,startSimTime:S(e.simulationStartTime,e.simulationOffsetDuration)};e.data.push(n)})),stopAudio:Object(u.b)((function(e,t){var n=e.data;t.src&&(n=n.filter((function(e){return e.src!==t.src}))),t.id&&(n=n.filter((function(e){return e.id!==t.id}))),e.data=n})),setAudio:Object(u.b)((function(e,t){if(t.id){var n=e.data.findIndex((function(e){return e.id===t.id}));e.data[n]=Object(O.a)(Object(O.a)({},e.data[n]),t)}})),fadeOutAudio:Object(u.f)(function(){var e=Object(m.a)(f.a.mark((function e(t,n,r){var a,i,o,c,s,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,i=r.getStoreActions,n.id&&n.time){e.next=3;break}return e.abrupt("return");case 3:if(!(o=a().data.find((function(e){return e.id===n.id})))){e.next=17;break}c=o.volume,s=n.time/100,u=s-1;case 8:if(!(u>=0)){e.next=16;break}return d=u/s*c,t.setAudio({id:n.id,volume:d}),e.next=13,i().time.wait(100);case 13:u--,e.next=8;break;case 16:t.stopAudio({id:n.id});case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),simulationStartTime:Object(u.d)([function(e,t){return t.time.simulationStartTime}],(function(e){return e})),simulationOffsetDuration:Object(u.d)([function(e,t){return t.time.simulationOffsetDuration}],(function(e){return e})),onTyping:Object(u.g)((function(e,t){return[t.chattyping.setIsTyping]}),(function(e,t){t.payload?e.playAudio({src:"/sounds/typing.mp3"}):e.stopAudio({src:"/sounds/typing.mp3"})})),onTypingEmoji:Object(u.g)((function(e,t){return[t.chattyping.setIsTypingEmoji]}),(function(e,t){t.payload&&e.playAudioOnetime({src:"/sounds/tap.ogg"})})),onClick:Object(u.g)((function(e,t){return[t.player.addClick]}),(function(e,t){e.playAudioOnetime({src:"/sounds/sfx-mouse-click.mp3"})})),onSendMessageFromMeToPeople:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromMeToPeople]}),(function(e,t){e.playAudioOnetime({src:"/sounds/juntos.ogg"})})),onSendMessageFromPeopleToMe:Object(u.g)((function(e,t){return[t.chatroom.sendMessageFromPeopleToMe,t.chatroom.sendImageFromPeopleToMe]}),(function(e,t){e.playAudioOnetime({src:"/sounds/light.ogg"})})),onSimulationPagaChanged:Object(u.g)((function(e,t){return[t.player.openSimulationHome,t.player.openSimulationChatRoom]}),(function(e,t){e.playAudioOnetime({src:"/sounds/swipe.wav",volume:.3})})),onPeopleChangeOnlineStatus:Object(u.g)((function(e,t){return[t.people.setPeopleOnline,t.people.setPeopleOffline]}),(function(e,t,n){n.getStoreState;e.playAudioOnetime({src:"/sounds/sfx-bleep.mp3",volume:.3})}))},E=n(35),C=n(36),F={type:"GOTO",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,!(0,t.getStoreState)().storybook.isImmediate){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",{data:n.next});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B={type:"WAIT",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,e.next=3,r().time.wait(n.time);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R={type:"SET_TIME",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,t.meta,n.time||(n.time=p.DateTime.local().toISO()),r().time.setStatedTime(n.time);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_={type:"SET_PEOPLE",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.getStoreState,i=t.meta,o=a().people.dataById(n.id),n.profilePicture&&(n.profilePicture=n.profilePicture.formatUnicorn({baseurl:i.baseurl})),r().people.setPeopleData(n),o&&void 0!==n.isOnline&&(!o.isOnline&&n.isOnline?r().people.setPeopleOnline(n):o.isOnline&&!n.isOnline&&r().people.setPeopleOffline(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U={type:"SET_MUSIC",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.meta,n.src&&(n.src=n.src.formatUnicorn({baseurl:a.baseurl})),n.onetime?r().audio.playAudioOnetime(n):r().audio.playAudio(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L={type:"STOP_MUSIC",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,n.time=n.time?n.time:0,e.next=4,r().audio.fadeOutAudio(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H={type:"SET_BACKGROUND",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreState,a=t.getStoreActions,i=t.meta,a().display.setData({id:"background",key:n.key?n.key:Object(I.a)(),src:n.src.formatUnicorn({baseurl:i.baseurl}),black:n.black,type:n.backgroundType,loop:!n.onetime,volume:1,mute:!1,startSimTime:S(r().time.simulationStartTime,r().time.simulationOffsetDuration)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z={type:"OPEN_CHATROOM",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=t.getStoreActions,a=t.getStoreState;case 1:if(a().notification.isNoNotificationActive){e.next=6;break}return e.next=4,r().time.wait(100);case 4:e.next=1;break;case 6:return e.next=8,r().time.wait(1e3);case 8:return e.next=10,r().player.clickHomeIconChatRoom();case 10:if((i=n.roomId)||(o=a().chatroom.dataConversationByPeopleId(n.peopleId),i=o.id),r().player.openSimulationChatRoom({roomId:i}),a().storybook.isImmediate||n.skipTimeForRead){e.next=23;break}if("people"!==n.by){e.next=23;break}c=a().chatroom.dataUnreadMessageFromPeople(n.id),s=0;case 17:if(!(s<c.length)){e.next=23;break}return e.next=20,r().time.wait(40*c[s].message.length);case 20:s++,e.next=17;break;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G={type:"OPEN_HOME",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.payload,(0,t.getStoreActions)().player.openSimulationHome();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K={type:"SEND_MESSAGE_FROM_ME_TO_PEOPLE",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,e.next=3,r().time.wait(1e3);case 3:if(a=function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=5;break}return e.next=3,r().chattyping.setTypingProcess([].concat(Object(C.a)(t),[1e3]));case 3:e.next=7;break;case 5:return e.next=7,r().chattyping.setTypingProcess([t,1e3]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(m.a)(f.a.mark((function e(t){var a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){for(a="",i=!1,o=t.length-1;o>=0&&!i;o--)"string"===typeof(c=t[o])&&(a=c,i=!0);i||(a=t[t.length-1]),r().chatroom.sendMessageFromMeToPeople({id:n.id,message:a})}else r().chatroom.sendMessageFromMeToPeople({id:n.id,message:t});return e.next=3,r().time.wait(500);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!n.messages){e.next=17;break}o=0;case 7:if(!(o<n.messages.length)){e.next=15;break}return e.next=10,a(n.messages[o]);case 10:return e.next=12,i(n.messages[o]);case 12:o++,e.next=7;break;case 15:e.next=22;break;case 17:if(!n.message){e.next=22;break}return e.next=20,a(n.message);case 20:return e.next=22,i(n.message);case 22:return e.next=24,r().time.wait(1e3);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W={type:"SEND_MESSAGE_FROM_PEOPLE_TO_ME",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,e.next=3,r().time.wait(1e3);case 3:if(a=function(){var e=Object(m.a)(f.a.mark((function e(t,n,a){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Math.max(700,15*n.length),r().people.setPeopleTyping(t),e.next=4,r().time.wait(i);case 4:if(r().people.setPeopleNotTyping(t),r().chatroom.sendMessageFromPeopleToMe({id:t,message:n}),a){e.next=9;break}return e.next=9,r().time.wait(50*n.length);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),!n.messages){e.next=14;break}i=0;case 6:if(!(i<n.messages.length)){e.next=12;break}return e.next=9,a(n.id,n.messages[i],n.skipTimeForRead);case 9:i++,e.next=6;break;case 12:e.next=17;break;case 14:if(!n.message){e.next=17;break}return e.next=17,a(n.id,n.message,n.skipTimeForRead);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y={type:"SEND_IMAGE_FROM_PEOPLE_TO_ME",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,a=t.meta,e.next=3,r().time.wait(1e3);case 3:return r().people.setPeopleTyping(n.id),e.next=6,r().time.wait(700);case 6:return r().people.setPeopleNotTyping(n.id),r().chatroom.sendImageFromPeopleToMe({id:n.id,imageURL:n.imageURL.formatUnicorn({baseurl:a.baseurl})}),e.next=10,r().time.wait(750);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q={type:"ADD_MESSAGE_OPTIONS",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,r=t.getStoreActions,!(0,t.getStoreState)().storybook.isImmediate){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r().time.wait(1e3);case 5:return r().chatoption.addOptions({id:n.id,tag:n.tag,options:n.options.map((function(e){return{message:e.message,next:e.next}}))}),e.abrupt("return",{data:"pause"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J={type:"ADD_STORY_DATA",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,r=t.getStoreActions,!(0,t.getStoreState)().storybook.isImmediate){e.next=3;break}return e.abrupt("return");case 3:if(n.datatype&&"inc"!==n.datatype?"dec"===n.datatype&&r().storydata.decrementDataByKey({key:n.key,value:n.value}):r().storydata.incrementDataByKey({key:n.key,value:n.value}),!n.next){e.next=6;break}return e.abrupt("return",{data:n.next});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V={type:"BRANCH",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,t.getStoreActions,!(r=t.getStoreState)().storybook.isImmediate){e.next=3;break}return e.abrupt("return");case 3:a=0;case 4:if(!(a<n.options.length)){e.next=30;break}if(i=n.options[a],o=r().storydata.dataByKey(i.key)){e.next=9;break}return e.abrupt("continue",27);case 9:if("="!==i.comparator||o.value!==i.value){e.next=13;break}return e.abrupt("return",{data:i.next});case 13:if(!(">"===i.comparator&&o.value>i.value)){e.next=17;break}return e.abrupt("return",{data:i.next});case 17:if(!(">="===i.comparator&&o.value>=i.value)){e.next=21;break}return e.abrupt("return",{data:i.next});case 21:if(!("<"===i.comparator&&o.value<i.value)){e.next=25;break}return e.abrupt("return",{data:i.next});case 25:if(!("<="===i.comparator&&o.value<=i.value)){e.next=27;break}return e.abrupt("return",{data:i.next});case 27:a++,e.next=4;break;case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X={type:"DISPLAY_PAGE_TITLE",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,a=t.meta,n.background&&(n.background=n.background.formatUnicorn({baseurl:a.baseurl}),r().display.setData({id:"background",src:n.background,black:n.black,type:n.backgroundType})),r().display.setData({id:"play",page:"defaultTitle"}),e.next=5,r().time.wait(2e3);case 5:i=0;case 6:if(!(i<=n.title.length)){e.next=14;break}return o=n.title.substring(0,i),r().display.setData({id:"defaultTitle",title:o}),e.next=11,r().time.wait(75);case 11:i++,e.next=6;break;case 14:return e.next=16,r().time.wait(750);case 16:return r().display.setData({id:"defaultTitle",author:n.author}),e.next=19,r().time.wait(5e3);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q={type:"DISPLAY_PAGE_SIMULATION",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,a=t.meta,(i={}).id="defaultSimulation",n.peopleId&&(i.peopleId=n.peopleId),n.background&&(n.background=n.background.formatUnicorn({baseurl:a.baseurl}),r().display.setData({id:"background",src:n.background,black:n.black,type:n.backgroundType})),r().display.setData(i),r().display.setData({id:"play",page:"defaultSimulation"}),e.next=9,r().time.wait(1e3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z={type:"DISPLAY_PAGE_CREDIT",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.getStoreActions,t.getStoreState,r().display.setData({id:"background",black:1}),r().display.setData({id:"play",page:"defaultCredit"}),a=[{title:"SFX Bleep",subtitle:"Bleep by Mike Koenig https://soundbible.com/1252-Bleep.html"}],i=[].concat(Object(C.a)(n.list),a),r().display.setData({id:"defaultCredit",list:i}),e.next=8,r().time.wait(2e3);case 8:o=f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r().display.setData({id:"defaultCredit",list:i.map((function(e,n){return Object(O.a)({focus:t===n},e)}))}),e.next=3,r().time.wait(350);case 3:case"end":return e.stop()}}),e)})),c=0;case 10:if(!(c<i.length)){e.next=15;break}return e.delegateYield(o(c),"t0",12);case 12:c++,e.next=10;break;case 15:return e.next=17,r().time.wait(2e3);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$={type:"DISPLAY_PAGE_OUTRO",execute:function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,n=t.getStoreActions,t.getStoreState,n().display.setData({id:"background",black:1}),n().display.setData({id:"play",page:"defaultOutro"}),e.next=5,n().time.wait(4e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ee=n(110).a+"",te=new function e(){Object(E.a)(this,e),this.log=function(){},this.error=function(){}},ne=new function e(){var t=this;Object(E.a)(this,e),this.fetchAvailableStories=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("./data/story.json").then((function(e){return e.json()})).then((function(e){return t.push.apply(t,Object(C.a)(e))}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.fetchAndValidateStory=function(){var e=Object(m.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){t.stories.push(e),r={error:null,data:e.id}})).catch((function(e){r={error:e,data:null}}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStory=function(){var e=Object(m.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stories.find((function(e){return e.id===n}))){e.next=5;break}return e.abrupt("return",{error:"Story Step with id: ".concat(n," is not found")});case 5:return e.abrupt("return",{error:null,data:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStoryStepLength=function(){var e=Object(m.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",r);case 5:return a=r.data,e.abrupt("return",{error:null,data:a.storydata.length});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStoryStep=function(){var e=Object(m.a)(f.a.mark((function e(n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",a);case 5:if(i=a.data,!(r>=i.storydata.length)){e.next=8;break}return e.abrupt("return",{error:"Story Step with id: ".concat(n," is only have ").concat(i.storydata.length," steps, index ").concat(r," is not found")});case 8:return o=i.storydata[r],e.abrupt("return",{error:null,data:o});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getStoryStepIndexWithTag=function(){var e=Object(m.a)(f.a.mark((function e(n,r){var a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",a);case 5:return i=a.data,o=i.storydata.findIndex((function(e){return e.tag===r})),e.abrupt("return",{error:o<0?"Story Step with tag:".concat(r," not found"):null,data:o});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getStoryMeta=function(){var e=Object(m.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStory(n);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",r);case 5:return a=r.data,e.abrupt("return",{error:null,data:a.meta});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stories=[]},re={master:b,info:d,storybook:j,storydata:h,display:x,time:v,people:k,chatroom:w,chattyping:A,chatoption:M,player:P,notification:N,audio:D},ae={initialState:{info:{version:ee}},injections:{logService:te,dataService:ne,storyService:new function e(t,n,r){var a=this;Object(E.a)(this,e),this.init=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getStoreState,r=t.getStoreActions,a.getStoreState=n,a.getStoreActions=r;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.play=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.getStoreActions().time.startSimulationStartTime(),e.next=3,a.execute();case 3:t=e.sent,(n=t.error)&&a.logService.error(n);case 6:case"end":return e.stop()}}),e)}))),this.continue=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.execute();case 2:t=e.sent,(n=t.error)&&a.logService.error(n);case 5:case"end":return e.stop()}}),e)}))),this.execute=Object(m.a)(f.a.mark((function e(){var t,n,r,i,o,c,s,u,d,l,p,b,j,h,O,x,v,y;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getStoreState().storybook.activeStoryId,n=a.getStoreState().storybook.activeStoryStepIndex,e.next=4,a.dataService.getStoryMeta(t);case 4:if(r=e.sent,i=r.data,!(o=r.error)){e.next=9;break}return e.abrupt("return",{error:o});case 9:return e.next=11,a.dataService.getStoryStep(t,n);case 11:if(c=e.sent,s=c.data,!(u=c.error)){e.next=16;break}return e.abrupt("return",{error:u});case 16:if(d=a.stepServices.find((function(e){return e.type===s.type}))){e.next=20;break}return l="Step Service with type ".concat(s.type," is Not Found!"),e.abrupt("return",{error:l});case 20:return e.next=22,d.execute({getStoreState:a.getStoreState,getStoreActions:a.getStoreActions,payload:s,meta:i,next:function(){var e=Object(m.a)(f.a.mark((function e(n){var r,i,o,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dataService.getStoryStepIndexWithTag(n);case 2:if(r=e.sent,i=r.data,(o=r.error)&&a.logService.error(o),a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:i}),!b()){e.next=13;break}return e.next=10,a.execute();case 10:c=e.sent,(s=c.error)&&a.logService.error(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 22:if(!(p=e.sent)||!p.error){e.next=25;break}return e.abrupt("return",{error:p.error});case 25:if(b=function(){return!a.getStoreState().storybook.isFinished&&!a.getStoreState().storybook.isPauseHere},void 0!==p){e.next=42;break}return e.next=29,a.dataService.getStoryStepLength(t);case 29:if(j=e.sent,h=j.data,!(O=j.error)){e.next=34;break}return e.abrupt("return",{error:O});case 34:if(n<h-1?a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:n+1}):a.getStoreActions().storybook.stopActiveStory(),!b()){e.next=39;break}return e.abrupt("return",a.execute());case 39:return e.abrupt("return",{error:null});case 40:e.next=63;break;case 42:if(!p||"pause"!==p.data){e.next=46;break}return e.abrupt("return",{});case 46:if(!p||!p.data){e.next=62;break}return e.next=49,a.dataService.getStoryStepIndexWithTag(t,p.data);case 49:if(x=e.sent,v=x.data,!(y=x.error)){e.next=54;break}return e.abrupt("return",{error:y});case 54:if(a.getStoreActions().storybook.setActiveStory({storyId:t,storyStepIndex:v}),!b()){e.next=59;break}return e.abrupt("return",a.execute());case 59:return e.abrupt("return",{});case 60:e.next=63;break;case 62:return e.abrupt("return",{error:"No next data provided!"});case 63:case"end":return e.stop()}}),e)}))),this.dataService=t,this.stepServices=Object(C.a)(n),this.logService=r}(ne,[F,B,R,_,U,L,H,z,G,K,W,Y,q,J,V,X,Q,Z,$],te)}},ie=n(19),oe=(n(159),function(e){var t=e.vertical,n=e.children,a=e.mark;return Object(r.jsxs)("div",{className:"full-page-template"+(t?" full-page-template-vertical":""),children:[n,Object(r.jsx)("div",{className:"full-page-template-mark",children:a})]})}),ce=oe;oe.defaultProps={vertical:!1};var se=n(259),ue=(n(160),function(e){var t=e.value;return Object(r.jsx)(se.b,{direction:"vertical",size:0,className:"core-footer",children:t})}),de=n(261),le=function(){var e=Object(u.j)((function(e){return e.info.version}));return Object(r.jsx)(ue,{value:[Object(r.jsxs)("span",{children:[" ",Object(r.jsx)(de.a,{})," @grimgank ",e]},"ssp")]})},fe=(n(169),function(e){var t=e.children;return Object(r.jsx)("div",{className:"center-template",children:t})}),me=n(255),pe=function(e){var t=e.onStoryClicked,n=Object(u.j)((function(e){return e.storybook.availableStories})),i=Object(u.h)((function(e){return e.storybook.fetchAvailableStories})),o=Object(a.useState)(!1),c=Object(s.a)(o,2),d=c[0],l=c[1],f=n.filter((function(e){return!e.hide}));return Object(a.useEffect)((function(){d||(i(),l(!0))}),[i,d,l]),Object(r.jsx)(fe,{children:f.length>0?f.map((function(e){return Object(r.jsx)(me.a,{onClick:function(){return t(e.id)},children:e.id},e.id)})):"Stories not available"})},be=n(13),je=(n(175),n(258)),he=function(e){var t=e.title,n=e.author,a=e.isImmediate,i=Object(je.a)(),o=Object(s.a)(i,2),c=o[0],u=o[1],d=Object(je.a)(),l=Object(s.a)(d,2),f=l[0],m=l[1],p=Object(be.c)({from:{opacity:0},to:{opacity:1,height:u.height},immediate:a}),b=Object(be.c)({from:{opacity:0},to:{opacity:1,height:m.height},immediate:a});return Object(r.jsxs)("div",{className:"default-title-space",children:[Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},p),{},{width:"100%"}),children:Object(r.jsx)("div",{ref:c,children:t?Object(r.jsx)("div",{className:"default-title-text default-title-text-title",children:t}):null})}),Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},b),{},{overflow:"hidden"}),children:Object(r.jsx)("div",{ref:f,children:n?Object(r.jsxs)("div",{className:"default-title-sub-container",children:[Object(r.jsx)("div",{className:"default-title-author",children:"diceritakan oleh"}),Object(r.jsx)("div",{className:"default-title-text default-title-text-sub",children:n})]}):null})})]})},Oe=function(){var e=Object(u.j)((function(e){return e.display.dataById("defaultTitle")})),t=Object(u.j)((function(e){return e.storybook.isImmediate}));return Object(r.jsx)(fe,{children:Object(r.jsx)(he,Object(O.a)({isImmediate:t},e))})},xe=(n(176),function(e){var t=e.children;return Object(r.jsxs)("div",{className:"mobile-box-template",children:[Object(r.jsx)("div",{className:"mobile-box-template-top"}),Object(r.jsx)("div",{className:"mobile-box-template-center",children:t}),Object(r.jsx)("div",{className:"mobile-box-template-bottom"})]})}),ve=(n(177),function(e){var t=e.top,n=e.children;return Object(r.jsxs)("div",{className:"simulation-box-template",children:[Object(r.jsx)("div",{className:"simulation-box-template-top",children:t}),n]})}),ye=(n(178),function(e){var t=e.header,n=e.content,a=e.footer;return Object(r.jsxs)("div",{className:"chat-box-template",children:[Object(r.jsx)("div",{className:"chat-box-template-header",children:t}),Object(r.jsx)("div",{className:"chat-box-template-content",children:n}),Object(r.jsx)("div",{className:"chat-box-template-footer",children:a})]})}),ge=(n(179),function(e){var t=e.content,n=e.footer;return Object(r.jsxs)("div",{className:"home-box-template",children:[Object(r.jsx)("div",{className:"home-box-template-content",children:t}),Object(r.jsx)("div",{className:"home-box-template-footer",children:n})]})}),Se=n(262),ke=n(263),Ie=n(264),Te=n(265),we=(n(180),function(e){var t=e.time,n=e.notifications,a=e.utilities;return Object(r.jsxs)("div",{className:"top-chat-template",children:[Object(r.jsx)("div",{className:"top-chat-box-time",children:t}),Object(r.jsx)("div",{className:"top-chat-box-notification",children:n.map((function(e,t){return Object(r.jsx)("div",{className:"top-chat-template-item",children:e},t)}))}),Object(r.jsx)("div",{className:"top-chat-box-utility",children:a.map((function(e,t){return Object(r.jsx)("div",{className:"top-chat-template-item",children:e},t)}))})]})}),Ae=function(e){var t=e.render,n=Object(u.j)((function(e){return e.time.statedTime})),r=Object(u.j)((function(e){return e.time.resetTime})),i=Object(a.useState)(g(n,r)),o=Object(s.a)(i,2),c=o[0],d=o[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d(g(n,r))}),1e3);return function(){return clearInterval(e)}}),[d,n,r]),t(p.DateTime.fromISO(c).toLocaleString(p.DateTime.TIME_24_SIMPLE),p.DateTime.fromISO(c).toLocaleString(p.DateTime.DATE_FULL))},Me=function(e){var t=e.hideClock,n=Object(u.j)((function(e){return e.storybook.isImmediate})),a=Object(u.j)((function(e){return e.player.isConnected})),i=Object(be.c)({from:{opacity:t?1:0},to:{opacity:t?0:1},immediate:n}),o=Object(u.j)((function(e){return e.chatroom.dataUnreadMessageFromPeopleCount}));return Object(r.jsx)(we,{time:Object(r.jsx)(be.a.div,{style:i,children:Object(r.jsx)(Ae,{render:function(e){return e}})}),notifications:Object(C.a)(o>0?[Object(r.jsx)(Se.a,{})]:[]),utilities:[a?Object(r.jsx)(ke.a,{}):Object(r.jsx)(Ie.a,{}),Object(r.jsx)(Te.a,{})]})},Pe=Me;Me.defaultProps={hideClock:!1};n(181);var Ne=function(e){var t=e.leftMenu,n=e.rightMenu,a=e.picture,i=e.title,o=e.subtitle;return Object(r.jsxs)("div",{className:"header-chat-template",children:[Object(r.jsx)("div",{className:"header-chat-left-menu",children:t}),Object(r.jsx)("div",{className:"header-chat-picture",children:a}),Object(r.jsxs)("div",{className:"header-chat-center",children:[Object(r.jsx)("div",{className:"header-chat-center-title",children:i}),Object(r.jsx)("div",{className:"header-chat-center-subtitle",children:o})]}),Object(r.jsx)("div",{className:"header-chat-right-menu",children:n})]})},De=n(266),Ee=(n(182),function(e){var t=e.onClick;return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"header-back-button",children:Object(r.jsx)(De.a,{onClick:t})})})}),Ce=n(267),Fe=(n(183),function(){return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"header-more-button",children:Object(r.jsx)(Ce.a,{})})})}),Be=(n(184),function(e){var t=e.imageUrl,n=e.children,a=e.black,i=e.circle;return Object(r.jsx)("div",{className:"full-page-image-template",style:{backgroundImage:"url(".concat(t,")"),borderRadius:i?"100%":"0%"},children:Object(r.jsx)("div",{className:"full-page-image-template-filler",style:{backgroundColor:"rgba(0, 0, 0, ".concat(a,")"),borderRadius:i?"100%":"0%"},children:n})})}),Re=Be;Be.defaultProps={imageUrl:"",black:0,circle:!1};n(185);var _e=function(e){var t=e.imageUrl;return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"header-profile-picture",children:Object(r.jsx)(Re,{circle:!0,imageUrl:t})})})},Ue=(n(186),n(44)),Le=function(e){var t=e.value;return Object(r.jsx)("div",{className:"header-title-text",children:Object(r.jsx)(Ue.Emojione,{text:t})})},He=(n(199),function(e){var t=e.value;return Object(r.jsx)("div",{className:"header-subtitle-text",children:t})}),ze=function(){var e=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),t="chatroom"===e.key?e.roomId:"",n=Object(u.j)((function(e){return e.chatroom.dataByRoomId(t)})),i=n?n.peopleId:"",o=Object(u.j)((function(e){return e.people.dataById(i)})),c=Object(u.j)((function(e){return e.time.statedTime})),d=Object(u.j)((function(e){return e.time.resetTime})),l=Object(a.useState)("block"),f=Object(s.a)(l,2),m=f[0],b=f[1];Object(a.useEffect)((function(){var e=!0,t=function(){b(o.isBlockingMe?"block":o.isTyping?"typing":o.isOnline?"online":"offline")};return"typing"===m&&!o.isTyping&&o.isOnline?setTimeout((function(){e&&t()}),1500):t(),function(){e=!1}}),[o,m,b]);return Object(r.jsx)(Ne,{leftMenu:Object(r.jsx)(Ee,{onClick:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}),rightMenu:Object(r.jsx)(Fe,{}),picture:Object(r.jsx)(_e,{imageUrl:o.isBlockingMe?"":o.profilePicture}),title:Object(r.jsx)(Le,{value:o.name}),subtitle:Object(r.jsx)(He,{value:"block"===m?"":"typing"===m?"mengetik...":"online"===m?"online":"offline"===m?"terakhir online ".concat(function(e){var t=y(c,d);return t.hasSame(e,"day")?e.toLocaleString(p.DateTime.TIME_24_SIMPLE):t.minus({days:1}).hasSame(e,"day")?"Kemarin":e.toLocaleString(p.DateTime.DATE_FULL)}(p.DateTime.fromISO(o.lastOnline))):""})})},Ge=(n(200),function(e){var t=e.leftMenu,n=e.centerMenu,a=e.rightMenu;return Object(r.jsxs)("div",{className:"footer-chat-template",children:[Object(r.jsx)("div",{className:"footer-chat-left-menu",children:t}),Object(r.jsx)("div",{className:"footer-chat-center-menu",children:n}),Object(r.jsx)("div",{className:"footer-chat-right-menu",children:a})]})}),Ke=Ge;Ge.defaultProps={leftMenu:Object(r.jsx)("div",{}),centerMenu:Object(r.jsx)("div",{}),rightMenu:Object(r.jsx)("div",{})};var We=n(268),Ye=(n(201),function(){return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"footer-send-button",children:Object(r.jsx)(We.a,{})})})}),qe=n(269),Je=(n(202),function(){return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"footer-elipsis-button",children:Object(r.jsx)(qe.a,{})})})}),Ve=(n(203),function(e){var t=e.value,n=e.isImmediate,a=e.isTyping,i=e.onClick,o=e.disable,c=Object(je.a)(),u=Object(s.a)(c,2),d=u[0],l=u[1].height,f=Object(be.c)({from:{opacity:0},to:{opacity:1,height:l},immediate:n});return Object(r.jsx)("div",{className:"footer-text-box-container",style:{opacity:o?.7:1},children:Object(r.jsx)(be.a.div,{style:f,className:"footer-text-box",children:Object(r.jsx)("div",{ref:d,children:Object(r.jsxs)("div",{className:"footer-text-box-text",onClick:o?null:i,children:[Object(r.jsx)("span",{children:Object(r.jsx)(Ue.Emojione,{text:t})}),a?Object(r.jsx)("span",{className:"footer-text-box-cursor"}):null]})})})})}),Xe=Ve;Ve.defaultProps={value:"",isTyping:!1,isImmediate:!1};n(204);var Qe=function(e){var t=e.value,n=e.isImmediate,a=e.onClick,i=e.isSelected,o=Object(je.a)(),c=Object(s.a)(o,2),u=c[0],d=c[1].height,l=Object(be.c)({from:{opacity:0},to:{opacity:1,height:d},immediate:n});return Object(r.jsx)("div",{className:"footer-option-text-item-container",children:Object(r.jsx)(be.a.div,{style:l,className:i?"footer-option-text-item-selected":"footer-option-text-item",children:Object(r.jsx)("div",{ref:u,children:Object(r.jsx)("div",{className:"footer-option-text-item-text",onClick:a,children:Object(r.jsx)("span",{children:Object(r.jsx)(Ue.Emojione,{text:t})})})})})})},Ze=Qe;Qe.defaultProps={value:"",isTyping:!1,isImmediate:!1};n(205);var $e=function(e){var t=e.options,n=e.isImmediate,a=e.onSelect;return Object(r.jsx)("div",{className:"footer-option-text-box-container",children:t.map((function(e,t,i){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ze,{onClick:function(){return a(e.id)},value:e.message,isSelected:e.selected,isImmediate:n}),t<i.length-1?Object(r.jsx)("div",{className:"footer-option-text-box-separator"}):null]},e.id)}))})},et=$e;$e.defaultProps={value:"",isTyping:!1,isImmediate:!1};var tt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),n=Object(u.j)((function(e){return e.chatoption.dataSelectedOptByChatroomId(t.roomId)})),i=Object(u.j)((function(e){return e.chatoption.dataOptsByChatroomId(t.roomId)})),o=Object(u.h)((function(e){return e.chatoption.selectOption})),c=Object(u.h)((function(e){return e.chatoption.submitOption})),d=Object(u.h)((function(e){return e.chatoption.removeAllOptionsByChatroomIdAndTag})),l=Object(a.useState)(void 0!==n),f=Object(s.a)(l,2),m=f[0],p=f[1],b=Object(a.useState)(""),j=Object(s.a)(b,2),h=j[0],x=j[1],v=Object(a.useState)([]),y=Object(s.a)(v,2),g=y[0],S=y[1],k=Object(be.d)(n&&!m,null,{from:{opacity:0,transform:"translate3d(-100%,0,0)"},enter:{opacity:1,transform:"translate3d(0%,0,0)"},leave:{opacity:0,transform:"translate3d(50%,0,0)"},immediate:e});Object(a.useEffect)((function(){var e=function(){return i?i.reduce((function(e,t,n){return 0===n?t.id:e+", "+t.name}),""):""};h!==e()&&(x(e()),S(function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}(i).map((function(e){return e.id}))))}),[h,x,S,i]);var I=function(){n&&n.selected&&(c({roomId:t.roomId,optId:n.id}),d({roomId:t.roomId,tag:n.meta.tag}))};return Object(r.jsx)(Ke,{centerMenu:n&&!m?Object(r.jsx)(Xe,{value:n.message,isImmediate:e,isTyping:!0,onClick:function(){p(!0)}}):void 0===i||0===i.length?Object(r.jsx)(Xe,{value:"",isImmediate:e,isTyping:!1,disable:!0}):Object(r.jsx)(et,{isImmediate:e,options:g.map((function(e){return i.find((function(t){return t.id===e}))})).map((function(e){return{id:e.id,message:e.message,selected:e.selected}})),onSelect:function(e){p(!1),o({roomId:t.roomId,optId:e})}}),rightMenu:Object(r.jsx)("div",{style:{width:"100%",height:"100%",position:"relative"},children:k.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(be.a.div,{onClick:I,style:Object(O.a)(Object(O.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:t?Object(r.jsx)(Ye,{}):Object(r.jsx)(Je,{})},a)}))})})},nt=(n(206),function(e){var t=e.items,n=e.isImmediate,a=t.map((function(e){return e})).reverse();return Object(r.jsx)("div",{className:"content-chat-template",children:a.map((function(e){return Object(r.jsx)(at,{isImmediate:n,children:e},e.key)}))})}),rt=nt;nt.defaultProps={items:[],isImmediate:!1};var at=function(e){var t=e.children,n=e.isImmediate,a=Object(je.a)(),i=Object(s.a)(a,2),o=i[0],c=i[1].height,u=Object(be.c)({from:{opacity:0},to:{opacity:1,height:c},immediate:n});return Object(r.jsx)(be.a.div,{style:u,className:"content-chat-item",children:Object(r.jsx)("div",{ref:o,children:t})})};n(207);function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ot(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ct=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},a.createElement("path",{d:"M610 545 l-235 -235 -90 90 -91 90 -29 -30 -29 -31 119 -119 120 -120 265 265 265 265 -30 30 -30 30 -235 -235z"}));function st(e,t){var n=e.title,r=e.titleId,i=ot(e,["title","titleId"]);return a.createElement("svg",it({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,ct)}var ut=a.forwardRef(st);n.p;function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ft=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},a.createElement("path",{d:"M557 612 l-117 -118 28 -27 28 -27 119 120 119 119 -24 26 c-13 14 -26 25 -29 25 -4 0 -59 -53 -124 -118z"}),a.createElement("path",{d:"M713 518 l-213 -213 -90 90 -90 90 -27 -28 -28 -27 118 -118 117 -117 242 242 242 242 -24 26 c-13 14 -26 25 -29 25 -3 0 -102 -96 -218 -212z"}),a.createElement("path",{d:"M40 455 l-24 -26 109 -109 109 -110 28 27 28 27 -107 108 c-59 59 -110 108 -114 108 -3 0 -16 -11 -29 -25z"}));function mt(e,t){var n=e.title,r=e.titleId,i=lt(e,["title","titleId"]);return a.createElement("svg",dt({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,ft)}var pt=a.forwardRef(mt);n.p;function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ht=a.createElement("g",{transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",fill:"#4fc3f7",stroke:"none"},a.createElement("path",{d:"M557 612 l-117 -118 28 -27 28 -27 119 120 119 119 -24 26 c-13 14 -26 25 -29 25 -4 0 -59 -53 -124 -118z"}),a.createElement("path",{d:"M713 518 l-213 -213 -90 90 -90 90 -27 -28 -28 -27 118 -118 117 -117 242 242 242 242 -24 26 c-13 14 -26 25 -29 25 -3 0 -102 -96 -218 -212z"}),a.createElement("path",{d:"M40 455 l-24 -26 109 -109 109 -110 28 27 28 27 -107 108 c-59 59 -110 108 -114 108 -3 0 -16 -11 -29 -25z"}));function Ot(e,t){var n=e.title,r=e.titleId,i=jt(e,["title","titleId"]);return a.createElement("svg",bt({xmlns:"http://www.w3.org/2000/svg",width:"100.000000pt",height:"100.000000pt",viewBox:"0 0 100.000000 100.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,ht)}var xt=a.forwardRef(Ot),vt=(n.p,function(e){var t=e.isHeader,n=e.isFooter,a=e.text,i=e.time,o=e.isDelivered,c=e.isRead;return Object(r.jsxs)("div",{className:"chat-item-me-container",children:[t?Object(r.jsx)("div",{className:"chat-item-me-triangle"}):null,Object(r.jsxs)("div",{className:"chat-item-me-text ".concat(n?"chat-item-me-extra-bottom-margin":""),children:[Object(r.jsx)(Ue.Emojione,{text:a}),Object(r.jsxs)("div",{className:"chat-item-me-status-container",children:[Object(r.jsx)("span",{className:"chat-item-me-status-time",children:i}),c?Object(r.jsx)(xt,{className:"chat-item-me-status-tick chat-item-me-status-tick-opaque"}):o?Object(r.jsx)(pt,{className:"chat-item-me-status-tick"}):Object(r.jsx)(ut,{className:"chat-item-me-status-tick"})]})]})]})}),yt=vt;vt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00",isRead:!1};n(208);var gt=function(e){var t=e.isHeader,n=e.isFooter,a=e.text,i=e.time;return Object(r.jsxs)("div",{className:"chat-item-people-container",children:[t?Object(r.jsx)("div",{className:"chat-item-people-triangle"}):null,Object(r.jsxs)("div",{className:"chat-item-people-text ".concat(n?"chat-item-people-extra-bottom-margin":""),children:[Object(r.jsx)(Ue.Emojione,{text:a}),Object(r.jsx)("div",{className:"chat-item-people-status-container",children:Object(r.jsx)("span",{className:"chat-item-people-status-time",children:i})})]})]})},St=gt;gt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00"};n(209);var kt=function(e){var t=e.isHeader,n=e.isFooter,a=e.imageUrl,i=e.time;return Object(r.jsxs)("div",{className:"chat-item-people-image-container",children:[t?Object(r.jsx)("div",{className:"chat-item-people-image-triangle"}):null,Object(r.jsxs)("div",{className:"chat-item-people-image-text ".concat(n?"chat-item-people-image-extra-bottom-margin":""),children:[Object(r.jsx)("div",{className:"chat-item-people-image-box",children:Object(r.jsx)("div",{className:"chat-item-people-image-box-inside",children:Object(r.jsx)(Re,{imageUrl:a})})}),Object(r.jsx)("div",{className:"chat-item-people-image-status-container",children:Object(r.jsx)("span",{className:"chat-item-people-image-status-time",children:i})})]})]})},It=kt;kt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00"};n(210);var Tt=function(e){var t=e.text;return Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"chat-item-notif",children:t})})},wt=Tt;Tt.defaultProps={isHeader:!1,isFooter:!1,text:"Placeholder Text",time:"00:00"};var At=function(e){return e.isMyChat?p.DateTime.fromISO(e.status.find((function(e){return"sent"===e.type})).time):p.DateTime.fromISO(e.status.find((function(e){return"received"===e.type})).time)},Mt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.time.statedTime})),n=Object(u.j)((function(e){return e.time.resetTime})),i=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),o="chatroom"===i.key?i.roomId:"",c=Object(u.j)((function(e){return e.chatroom.dataByRoomId(o)})),d=Object(a.useState)([]),l=Object(s.a)(d,2),f=l[0],m=l[1];return Object(a.useEffect)((function(){if(c){var e=[];c.chats.forEach((function(a,i,o){var c=function(e,t,n,r,a){var i=function(e){var t=y(r,a);return t.hasSame(e,"day")?"Hari Ini":t.minus({days:1}).hasSame(e,"day")?"Kemarin":e.toLocaleString(p.DateTime.DATE_FULL)};if(0===t)return i(At(e));var o=At(e),c=At(n[t-1]);return o.hasSame(c,"day")?void 0:i(o)}(a,i,o,t,n);void 0!==c&&e.push(Object(r.jsx)(wt,{text:c},a.id+"-info"));var s=function(e,t,n){var r=!1;(0===t||e.isMyChat!==n[t-1].isMyChat||!At(e).hasSame(At(n[t-1]),"day")||At(e).diff(At(n[t-1])).milliseconds>12e4)&&(r=!0);var a=!1;return(t===n.length-1||e.isMyChat!==n[t+1].isMyChat||!At(e).hasSame(At(n[t+1]),"day")||At(n[t+1]).diff(At(e)).milliseconds>12e4)&&(a=!0),{isHeader:r,isFooter:a}}(a,i,o),u=s.isHeader,d=s.isFooter,l=At(a).toLocaleString(p.DateTime.TIME_24_SIMPLE);if(a.isMyChat){var f=a.status.find((function(e){return"read"===e.type})),m=a.status.find((function(e){return"delivered"===e.type}));e.push(Object(r.jsx)(yt,{isHeader:u,isFooter:d,time:l,text:a.message,isRead:f,isDelivered:m},a.id))}else"message"===a.type?e.push(Object(r.jsx)(St,{isHeader:u,isFooter:d,time:l,text:a.message},a.id)):"image"===a.type&&e.push(Object(r.jsx)(It,{isHeader:u,isFooter:d,time:l,imageUrl:a.imageURL},a.id))})),m(e)}}),[c,n,t]),Object(r.jsx)(rt,{items:f,isImmediate:e})},Pt=(n(211),function(e){var t=e.black,n=e.children;return Object(r.jsx)("div",{className:"full-page-darken",style:{backgroundColor:"rgba(0, 0, 0, ".concat(t,")")},children:n})}),Nt=(n(212),function(e){var t=e.time,n=e.date;return Object(r.jsxs)("div",{className:"home-clock",children:[Object(r.jsx)("div",{className:"home-clock-time",children:t}),Object(r.jsx)("div",{className:"home-clock-date",children:n})]})}),Dt=function(){return Object(r.jsx)(Pt,{black:.2,children:Object(r.jsx)(fe,{children:Object(r.jsx)(Ae,{render:function(e,t){return Object(r.jsx)(Nt,{time:e,date:t})}})})})},Et=(n(213),function(e){var t=e.icon,n=e.opacity,i=e.count,o=e.isImmediate,c=Object(a.useState)(0),u=Object(s.a)(c,2),d=u[0],l=u[1],f=Object(a.useState)(!1),m=Object(s.a)(f,2),p=m[0],b=m[1];Object(a.useEffect)((function(){var e=i>99?"99+":i;d!==e&&l(e);var t=i>0;p!==t&&b(t)}),[d,l,p,b,i]);var j=Object(be.d)(p,null,{from:{opacity:0,transform:"translate3d(0,100%,0)"},enter:{opacity:1,transform:"translate3d(0,0%,0)"},leave:{opacity:0,transform:"translate3d(0,-50%,0)"},immediate:o});return Object(r.jsxs)("div",{className:"home-icon-container",children:[Object(r.jsx)("div",{className:"home-icon-badge-container",children:Object(r.jsx)("div",{style:{position:"relative"},children:j.map((function(e){var t=e.item,n=e.props,a=e.key;return t?Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},n),{},{position:"absolute"}),children:Object(r.jsx)("div",{className:"home-icon-badge",children:d})},a):null}))})}),Object(r.jsx)("div",{style:{opacity:n},children:t})]})}),Ct=Et;Et.defaultProps={icon:null,opacity:.2,count:0,isImmediate:!1};var Ft=n(270),Bt=n(271),Rt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.chatroom.dataUnreadMessageFromPeopleCount})),n=Object(u.j)((function(e){return e.player.clicksById("home-icon-chat")})),a=Object(be.c)({to:{transform:n?"scale(0.925)":"scale(1)"},immediate:e,config:be.b.wobbly});return Object(r.jsx)(Pt,{black:.1,children:Object(r.jsx)(fe,{children:Object(r.jsxs)(se.b,{size:"large",children:[Object(r.jsx)(Ct,{icon:Object(r.jsx)(Ft.a,{})}),Object(r.jsx)(Ct,{icon:Object(r.jsx)(Bt.a,{})}),Object(r.jsx)(Ct,{icon:Object(r.jsx)(de.a,{})}),Object(r.jsx)(be.a.div,{style:a,children:Object(r.jsx)(Ct,{icon:Object(r.jsx)(Se.a,{}),count:t,opacity:t>0?.5:void 0})})]})})})},_t=(n(214),function(e){var t=e.picture,n=e.title,a=e.sub,i=e.time;return Object(r.jsx)("div",{className:"notification-chat-box-container",children:Object(r.jsxs)("div",{className:"notification-chat-box-item",children:[Object(r.jsx)("div",{className:"notification-chat-box-picture",children:Object(r.jsx)(Re,{circle:!0,imageUrl:t})}),Object(r.jsxs)("div",{className:"notification-chat-box-text",children:[Object(r.jsx)("div",{className:"notification-chat-box-text-title",children:Object(r.jsx)(Ue.Emojione,{text:n})}),Object(r.jsx)("div",{className:"notification-chat-box-text-sub",children:Object(r.jsx)(Ue.Emojione,{text:a})})]}),Object(r.jsx)("div",{className:"notification-chat-box-time",children:i})]})})}),Ut=_t;_t.defaultProps={sub:"Subtitle Text",title:"Title Text",time:"00:00"};n(215);var Lt=function(e){var t=e.items,n=e.isImmediate,a=Object(be.d)(t,(function(e){return e.key}),{from:{opacity:0,transform:"translate3d(-30%,0,0)"},enter:{opacity:1,transform:"translate3d(0%,0,0)"},leave:{opacity:0,transform:"translate3d(30%,0,0)"},immediate:n});return Object(r.jsx)("div",{className:"notification-box-template",children:a.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(be.a.div,{style:n,className:"notification-box-template-item",children:t},a)}))})},Ht=function(){var e=Object(u.j)((function(e){return e.notification.data}));return Object(r.jsx)(Lt,{items:e.filter((function(e){return"chat"===e.app&&!1===e.isDisplayed})).map((function(e){var t={};return e.messages.length>0&&(t=e.messages[e.messages.length-1]),Object(r.jsx)(Ut,{picture:e.picture,title:e.title,sub:t.message,time:p.DateTime.fromISO(t.time).toLocaleString(p.DateTime.TIME_24_SIMPLE)},e.id)}))})},zt=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.player.getSelectedSimulationData})),n=Object(u.j)((function(e){return e.display.isHideChatbox})),a=Object(be.d)(t?t.key:null,null,{from:{transform:"translate3d(100%,0,0)"},enter:{transform:"translate3d(0%,0,0)"},leave:{transform:"translate3d(-100%,0,0)"},config:be.b.slow,immediate:e}),i=function(e){switch(e){case"home":return Object(r.jsx)(ge,{content:Object(r.jsx)(Dt,{}),footer:Object(r.jsx)(Rt,{})});case"chatroom":return Object(r.jsx)(ye,{header:Object(r.jsx)(ze,{}),content:Object(r.jsx)(Mt,{}),footer:n?null:Object(r.jsx)(tt,{})});default:return null}},o=!!t&&"home"===t.key;return Object(r.jsx)(xe,{children:Object(r.jsxs)(ve,{top:Object(r.jsx)(Pe,{hideClock:o}),children:[Object(r.jsx)("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:a.map((function(e){var t=e.item,n=e.props,a=e.key;return Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:i(t)},a)}))}),Object(r.jsx)(Ht,{})]})})},Gt=n(257),Kt=n(260),Wt=function(){var e=Object(u.j)((function(e){return e.display.dataById("defaultCredit")}));return Object(r.jsxs)("div",{style:{overflow:"hidden",height:"100%",padding:"10px",maxWidth:"1000px",margin:"auto"},children:[Object(r.jsx)("div",{style:{padding:"10px 20px",fontSize:"30px",fontWeight:"bold",marginTop:"200px"},children:"CREDIT"}),Object(r.jsx)(Gt.a,{gutter:[10,10],children:e&&e.list.map((function(e,t){return Object(r.jsx)(Kt.a,{flex:"0 1 300px",children:Object(r.jsx)(Yt,{title:e.title,subtitle:e.subtitle,focus:e.focus})},t)}))})]})},Yt=function(e){var t=e.title,n=e.subtitle,i=e.focus,o=Object(a.useRef)(null);return Object(a.useEffect)((function(){i&&o.current.scrollIntoView({behavior:"smooth"})}),[i]),Object(r.jsxs)("div",{ref:o,style:{padding:"10px 20px"},children:[Object(r.jsx)("div",{style:{fontSize:"30px",fontWeight:"bold"},children:t}),Object(r.jsx)("div",{children:n})]})},qt=[{key:"defaultTitle",comp:Oe},{key:"defaultSimulation",comp:zt},{key:"defaultOutro",comp:function(){return Object(r.jsx)(fe,{children:Object(r.jsxs)("div",{style:{padding:"20px"},children:[Object(r.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold"},children:"THANKS FOR WATCHING"}),Object(r.jsx)("div",{children:"by Social Story Project"})]})})}},{key:"defaultCredit",comp:Wt}],Jt=(n(216),function(e){var t=e.stacks;return Object(r.jsx)("div",{className:"stack-template-container",children:t.map((function(e,t){return Object(r.jsx)("div",{className:"stack-template-item",children:e},t)}))})}),Vt=Jt;Jt.defaultProps={stacks:[]};var Xt=n(252),Qt=function(){var e=Object(u.j)((function(e){return e.audio.data}));return Object(r.jsx)("div",{children:e.map((function(e){return Object(r.jsx)(Zt,{play:!0,id:e.id,src:e.src,loop:e.loop,mute:e.muted,volume:e.volume,startSimTime:e.startSimTime},e.id)}))})},Zt=function(e){var t=e.id,n=e.play,i=e.src,o=e.loop,c=e.mute,d=e.volume,l=e.startSimTime,f=Object(u.h)((function(e){return e.audio.stopAudio})),m=Object(u.j)((function(e){return e.time.simulationStartTime})),p=Object(u.j)((function(e){return e.time.simulationOffsetDuration})),b=Object(u.j)((function(e){return e.storybook.isImmediate})),j=Object(Xt.a)({src:i,loop:o,onEnded:function(){return f({id:t})}}),h=Object(s.a)(j,3),O=h[0],x=h[1],v=h[2],y=x.paused,g=x.muted,k=x.volume,I=x.duration>0,T=x.duration;return Object(a.useEffect)((function(){if(!b){if(n&&y&&I){var e=(S(m,p)-l)/1e3;e<T?(v.play(),v.seek(e)):o&&(e%=T,v.play(),v.seek(e))}else n||y||v.pause();c&&!g?v.mute():!c&&g&&v.unmute(),d!==k&&v.volume(d)}}),[o,T,l,I,b,m,p,y,g,k,n,c,d,v]),Object(r.jsx)("div",{children:O})};Zt.defaultProps={id:"",play:!0,src:"",loop:!1,mute:!1,volume:1};var $t=n(253),en=function(e){var t=e.black,n=e.play,i=e.src,o=e.loop,c=e.mute,d=e.volume,l=e.startSimTime,f=Object($t.a)(Object(r.jsx)("video",{src:i,loop:o,style:{opacity:1-t,minHeight:"100%",minWidth:"100%",objectFit:"cover",marginLeft:"50vw",transform:"translate(-50%)"}})),m=Object(s.a)(f,3),p=m[0],b=m[1],j=m[2],h=Object(u.j)((function(e){return e.time.simulationStartTime})),O=Object(u.j)((function(e){return e.time.simulationOffsetDuration})),x=Object(u.j)((function(e){return e.storybook.isImmediate})),v=b.paused,y=b.muted,g=b.volume,k=b.duration>0,I=b.duration;return Object(a.useEffect)((function(){if(!x){if(n&&v&&k){var e=(S(h,O)-l)/1e3;e<I?(j.play(),j.seek(e)):o&&(e%=I,j.play(),j.seek(e))}else n||v||j.pause();c&&!y?j.mute():!c&&y&&j.unmute(),d!==g&&j.volume(d)}}),[o,I,l,k,x,h,O,v,y,g,n,c,d,j]),p},tn=en;en.defaultProps={black:0,loop:!1};var nn=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.display.dataById("background")})),n={id:t?t.key:"",type:t&&t.type?t.type:"img",src:t?t.src:"",black:t&&void 0!==t.black?t.black:.8,loop:!!t&&t.loop,mute:!!t&&t.mute,volume:t?t.volume:1,startSimTime:t?t.startSimTime:0},a=Object(be.d)(n,(function(e){return e.id}),{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},immediate:e,config:{duration:2e3}});return Object(r.jsx)("div",{style:{position:"relative",display:"flex",flex:"1"},children:a.map((function(e){var t=e.item,n=e.props,a=e.key;return t?Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:"img"===t.type?Object(r.jsx)(Re,{imageUrl:t.src,black:t.black}):"vid"===t.type?Object(r.jsx)(tn,{play:!0,src:t.src,black:t.black,loop:t.loop,mute:t.mute,volume:t.volume,startSimTime:t.startSimTime}):null},a):null}))})},rn=function(){var e=Object(u.j)((function(e){return e.storybook.isImmediate})),t=Object(u.j)((function(e){return e.display.dataById("play")})),n=t?t.page:void 0,a=Object(be.d)(n,(function(e){return e}),{from:{opacity:0,transform:"translate3d(0,100%,0)"},enter:{opacity:1,transform:"translate3d(0,0%,0)"},leave:{opacity:0,transform:"translate3d(0,-50%,0)"},immediate:e});return Object(r.jsx)(Vt,{stacks:[Object(r.jsx)(Qt,{}),Object(r.jsx)(nn,{}),Object(r.jsx)("div",{style:{position:"relative",display:"flex",flex:"1"},children:a.map((function(e){var t=e.item,n=e.props,a=e.key;if(t){var i=qt.find((function(e){return e.key===t})).comp;return Object(r.jsx)(be.a.div,{style:Object(O.a)(Object(O.a)({},n),{},{position:"absolute",width:"100%",height:"100%",display:"flex"}),children:Object(r.jsx)(i,{})},a)}return null}))})]})},an=function(){var e=Object(ie.f)("story-id",ie.e),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(ie.f)("start-from",ie.b),c=Object(s.a)(o,1)[0],d=Object(ie.f)("start-from-tag",ie.e),l=Object(s.a)(d,1)[0],f=Object(ie.f)("pause-at",ie.b),m=Object(s.a)(f,1)[0],p=Object(ie.f)("pause-at-tag",ie.e),b=Object(s.a)(p,1)[0],j=Object(ie.f)("mute",ie.a),h=Object(s.a)(j,1)[0],O=Object(ie.f)("hide-chatbox",ie.a),x=Object(s.a)(O,1)[0],v=Object(ie.f)("story-data",ie.c),y=Object(s.a)(v,1)[0],g=Object(a.useState)(!1),S=Object(s.a)(g,2),k=S[0],I=S[1],T=Object(u.h)((function(e){return e.storybook.startStory})),w=Object(u.h)((function(e){return e.storybook.setTargetActiveStoryStepIndex})),A=Object(u.h)((function(e){return e.storybook.setTargetActiveStoryStepTag})),M=Object(u.h)((function(e){return e.storybook.setPauseAtStoryStepIndex})),P=Object(u.h)((function(e){return e.storybook.setPauseAtStoryStepTag})),N=Object(u.h)((function(e){return e.audio.setMute})),D=Object(u.h)((function(e){return e.display.setHideChatbox})),E=Object(u.h)((function(e){return e.storydata.setDataByKey})),C=Object(u.j)((function(e){return e.storybook.isPlaying})),F=Object(u.j)((function(e){return e.storybook.isImmediate}));return Object(a.useEffect)((function(){if(l?A(l):c&&w(c),b?P(b):m&&M(m),h&&N(h),x&&D(x),y)for(var e in y)E({key:e,value:y[e]});!k&&n&&(T(n),I(!0))}),[n,T,k,I,c,w,l,A,m,M,b,P,h,N,x,D,y,E]),Object(r.jsx)(ce,{mark:Object(r.jsx)(le,{}),children:F?Object(r.jsx)(ce,{children:"loading..."}):C?Object(r.jsx)(rn,{}):n?null:Object(r.jsx)(pe,{onStoryClicked:function(e){return i(e)}})})},on=n(254),cn=function(e){var t=e.renderIfDone,n=Object(ie.f)("fs",ie.a),i=Object(s.a)(n,1)[0],o=Object(a.useState)(null!==document.fullscreenElement),c=Object(s.a)(o,2),u=c[0],d=c[1],l=Object(a.useState)(i),f=Object(s.a)(l,2),m=f[0],p=f[1],b=document.documentElement,j=function(){b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.msRequestFullscreen&&b.msRequestFullscreen()};return u||m?t:Object(r.jsx)(ce,{children:Object(r.jsx)(Vt,{stacks:[Object(r.jsx)(Re,{imageUrl:"./images/book.jpg",black:.7}),Object(r.jsx)(fe,{children:Object(r.jsxs)(se.b,{direction:"vertical",style:{padding:"40px"},children:[Object(r.jsx)(on.a.Title,{level:4,style:{color:"whitesmoke"},children:"Chatting Game Prototype!"}),Object(r.jsx)(on.a.Text,{style:{color:"whitesmoke"},children:"Agar lebih menikmati dalam bermain, mainkan lewat mobile yaa. Fullscreen juga biar mencet-mencet tombolnya enak"}),Object(r.jsxs)(se.b,{children:[Object(r.jsx)(me.a,{type:"primary",onClick:function(){d(!0),p(!0),j()},children:"Ok Fullscreen"}),Object(r.jsx)(me.a,{onClick:function(){d(!1),p(!0)},children:"Gak Mau!"})]})]})})]})})},sn=(n(248),function(){return Object(r.jsx)(ce,{children:Object(r.jsx)(Vt,{stacks:[Object(r.jsx)(Re,{imageUrl:"http://localhost:5001/images/people.jpg",black:.8}),Object(r.jsx)(fe,{children:Object(r.jsx)("div",{className:"logo",children:"SOCIAL STORY"})})]})})}),un=n(133),dn=n(20),ln=Object(u.e)(re,ae),fn=function(e){var t=e.children,n=Object(u.h)((function(e){return e.master.init})),i=Object(u.j)((function(e){return e.master.isInitialized})),o=Object(u.i)(),c=Object(a.useState)(!1),d=Object(s.a)(c,2),l=d[0],f=d[1];return!l&&o&&(n(),f(!0)),i?t:Object(r.jsx)(ce,{})};var mn=function(){return Object(r.jsx)(u.a,{store:ln,children:Object(r.jsx)(un.a,{children:Object(r.jsx)(ie.d,{ReactRouterRoute:dn.a,children:Object(r.jsx)(fn,{children:Object(r.jsxs)(dn.c,{children:[Object(r.jsx)(dn.a,{exact:!0,path:"/logo",component:sn}),Object(r.jsx)(dn.a,{path:"*",children:Object(r.jsx)(cn,{renderIfDone:Object(r.jsx)(an,{})})})]})})})})})},pn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(mn,{})}),document.getElementById("root")),pn()}},[[250,1,2]]]);